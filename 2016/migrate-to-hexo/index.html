
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>博客迁移到了Hexo（附折腾记录） | 存档Save&amp;Load</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="四年沉寂，重新出发，将博客从Octopress 迁移到了 Hexo。
记录下迁移的过程，以及Hexo的坑点。">
<meta property="og:type" content="article">
<meta property="og:title" content="博客迁移到了Hexo（附折腾记录）">
<meta property="og:url" content="https://jaycechant.info/2016/migrate-to-hexo/index.html">
<meta property="og:site_name" content="存档Save&Load">
<meta property="og:description" content="四年沉寂，重新出发，将博客从Octopress 迁移到了 Hexo。
记录下迁移的过程，以及Hexo的坑点。">
<meta property="og:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
<meta property="og:updated_time" content="2017-01-09T15:27:27.445Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="博客迁移到了Hexo（附折腾记录）">
<meta name="twitter:description" content="四年沉寂，重新出发，将博客从Octopress 迁移到了 Hexo。
记录下迁移的过程，以及Hexo的坑点。">
<meta name="twitter:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
  
    <link rel="alternative" href="/atom.xml" title="存档Save&amp;Load" type="application/atom+xml">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">存档Save&amp;Load</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">存档意味着放下包袱，搞砸了不过回来读档</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/list">List</a>
        
          <a class="main-nav-link" href="https://github.com/JayceChant">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/sitemap.xml">Sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
      </nav>
      
      <div id="search-form-wrap">
        <form action="" accept-charset="utf-8" class="search-form">
          <input id="searchtext" type="search" name="q" maxlength="20" class="search-form-input" placeholder="Search" onkeypress="if(event.keyCode==13){document.getElementById('searchsub').click();return false;}">
          <input id="searchsub" type="submit" value="" class="search-form-submit" onclick="window.open('https://global.bing.com/search?&amp;q=site:jaycechant.info '+document.getElementById('searchtext').value, '_blank')">
        </form>
      </div>
      
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-migrate-to-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/migrate-to-hexo/" class="article-date">
  <time datetime="2016-06-27T07:46:12.000Z" itemprop="datePublished">2016-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      博客迁移到了Hexo（附折腾记录）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>四年沉寂，重新出发，将博客从Octopress 迁移到了 Hexo。</p>
<p>记录下迁移的过程，以及Hexo的坑点。</p>
<a id="more"></a>
<h1 id="源起"><a href="#源起" class="headerlink" title="源起"></a>源起</h1><p>大学临近毕业的时候，发现了Octopress，就兴冲冲用Github pages建了自己的博客。</p>
<p>还没写两篇文章，一入职，就忙起来了，从入职培训，到后来项目赶着上市时不停的加班……</p>
<p>我本就是懈惰的人，加之公司安保极严，在公司的成果无法带出，加班之余便再无更新，以至荒废。</p>
<p>眨眼四年过去，工作内容渐渐从新鲜有趣变成了单调重复，也觉得自己不适合通信硬件行业（软件岗，但是围绕硬件开发OS），心一横，裸辞了。美其名曰，在家充电。</p>
<p>四年里深深体会到留下文字记录的重要性。软件这行，涉及知识之多，更新之快，以我等凡人，哪怕自己踩过的坑，当时再刻骨铭心，事后回忆根本记不得细节，半天最多拼凑出一点线头，乱扯一通，平白多了许多无用功。</p>
<p>在家面壁的第一件事，就是博客重开。如果说当年年少naive，存有一点虚荣，希望写文能得到关注；那么现在纯粹是为自己做个记录。至于有没有别人看，倒是一点不重要了。</p>
<p>像我还在公司时，偶尔折腾一些新鲜且实用的技术做分享，最终发现感兴趣的人寥寥无几 —— 一些人觉得跟他业务无关，一些人觉得这太难懂，一些人觉得这太显浅……</p>
<p><strong>以后关于技术上的经历，尽量事无巨细在此记录；在老东家闲时研究的一些跟商业秘密无关的东西，我也会尽量回忆出来整理在此。</strong></p>
<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>四年里面，笔记本已经换过了。重新翻出Octopress ，实际上已经不能跑了，还得重新配置一遍。想当初有些gem需要Devkit编译，又麻烦又慢，坑不是一般的多。关键当初记录这些坑的博文还没写完……</p>
<p>这种情况下，发现了Hexo。</p>
<p>说到底，用Github-pages 搭博客，要的是静态HTML+js。然而总是手动写当然效率低，Octopress 不过提供了工具和模板，从Markdown 生成HTML。<br>这样的事，Hexo干得也差不多，而且因为基于Node.js，不像Octopress涉及那么多语言，配置容易太多了，速度快太多了。（没记错的话，入口是Ruby，有些gem基于C++所以要编译，代码高亮貌似Python，而页面渲染，一定有引用js的库……真是大杂烩）</p>
<p>当然并不是Octopress 就不好了，从Hexo 主页的描述来看，Hexo作为后来者，借鉴了很多Octopress 的优点，同时躲开了很多Octopress 掉了的坑。</p>
<h1 id="How-to"><a href="#How-to" class="headerlink" title="How-to"></a>How-to</h1><p><strong>注意！！ 在当前这个时间点（2016-06），Hexo 还有大量的提交，我以下说的内容，随时可能因为版本的迭代而过时。</strong></p>
<p>Hexo 依赖两个东西</p>
<ul>
<li>Node.js</li>
<li>Git</li>
</ul>
<p>关于Node.js 的安装，我前面一篇关于 <code>nodePPT</code> 的<a href="../intro-to-nodeppt/">文章</a>有介绍，不再赘述。Git 的话我也想整理一些文字，不过在那之前，网上相关的信息也非常多，应该很好解决。</p>
<p>有了这两个东西之后，安装Hexo无非就是一行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo-cli</div></pre></td></tr></table></figure>
<p>其实，这些内容，甚至包括Git 和 Node.js 的安装，<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">官方文档</a>都有简要提及，甚至连从Octopress 迁移都有对应说明。所以官方文档有提到的我都不说了。hexo 初始化之后会自动生成一篇以 <strong>hello world</strong> 为题的文章，我把它挪到了<a href="../../pages/hello-world/">这里</a> ，大家可以参考一下。后面主要记录一下遇到 / 我觉得可能有人会遇到 的坑，以及补充官方文档不够详尽 / 显眼之处。</p>
<p><strong>Updated:</strong> 以下安装插件的代码，都要在执行过<code>hexo init</code> 的博客目录下执行一遍。原因参考下面『在其他电脑配置已有的博客』章节。</p>
<h2 id="任意目录运行hexo"><a href="#任意目录运行hexo" class="headerlink" title="任意目录运行hexo"></a>任意目录运行hexo</h2><p>概述页面的评论有人问，成功安装之后，报这个错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">‘hexo’不是内部或者外部命令，也不是可运行的程序或批处理文件</div></pre></td></tr></table></figure>
<p>明眼人一看就知道是path环境变量的问题，解决办法就是把node的安装目录加入环境变量。如果这样都还不知道怎么办，详细设置请看 <code>nodePPT</code> 的<a href="../intro-to-nodeppt/">那篇文章</a>。</p>
<h2 id="语言配置"><a href="#语言配置" class="headerlink" title="语言配置"></a>语言配置</h2><p>文档只告诉你可以配置语言，但是并没有告诉你有什么语言可以选，也没告诉每个语言对应的值</p>
<p>譬如像我这种长期写Android 代码的，就会习惯性写 <code>zh-rCN</code></p>
<p>实际上语言文件在 <code>themes\&lt;主题&gt;\language\</code> 下面</p>
<p><s>我暂时不折腾，用默认的 landscape 主题</s>我现在使用基于landscape改动的landscape-plus，那么对应简体中文的配置就是 <code>zh-CN</code></p>
<h2 id="Octopress-的-Categories-V-S-Hexo-的-Tags"><a href="#Octopress-的-Categories-V-S-Hexo-的-Tags" class="headerlink" title="Octopress 的 Categories V.S. Hexo 的 Tags"></a>Octopress 的 Categories V.S. Hexo 的 Tags</h2><p>在Octopress 如果要增加标签来分类，用的是</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">categories:</span> [tag1, tag2, tag3]</div></pre></td></tr></table></figure>
<ul>
<li>tag1</li>
<li>tag2</li>
<li>tag3</li>
</ul>
<p>然后在每个标签下，都能找到这篇文章</p>
<p>文章迁移到了 Hexo 之后，效果就变成了嵌套关系</p>
<ul>
<li>tag1<ul>
<li>tag2<ul>
<li>tag3</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>原来Hexo 将分类功能细化成了 分类 和 标签，原来的 <strong>分类</strong> 功能有了层次关系，譬如</p>
<ul>
<li>中国<ul>
<li>广东省<ul>
<li>广州市</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>如果想像以前那样用互相独立的标签，Hexo 的用法是</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">tags:</span></div><div class="line"><span class="bullet">-</span> tag1</div><div class="line"><span class="bullet">-</span> tag2</div><div class="line"><span class="bullet">-</span> tag3</div></pre></td></tr></table></figure>
<h2 id="关于Git"><a href="#关于Git" class="headerlink" title="关于Git"></a>关于Git</h2><p>部署时关于Git的问题，其实<a href="https://hexo.io/zh-cn/docs/deployment.html" target="_blank" rel="external">官方文档-部署</a>是有提到的。然而还是看到网上很多人会问，所以我把关于安装相关插件和相关命令的章节链接放这里。估计多数人是漏了安装 <code>hexo-deployer-git</code> 这个插件。可以通过以下命令安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>另外，如果你像我一样用Windows，平时用的Gitbash，部署时会报一些错。</p>
<p>那是因为Gitbash启动时会加载一些参数，这些参数在cmd下是无效的，你得重新配置一次。</p>
<p>所以最好的办法是，你直接在Gitbash下运行hexo。</p>
<h2 id="关于Disqus-或国内的多说-与-主题"><a href="#关于Disqus-或国内的多说-与-主题" class="headerlink" title="关于Disqus(或国内的多说) 与 主题"></a>关于Disqus(或国内的多说) 与 主题</h2><p>我本来一点不想折腾外观的东西，能用就行，但评论功能无论如何是需要的。</p>
<p>然而我并没有找到配置的地方，也记不起当初Octopress 怎么配置。于是去看了Disqus 的说明，发现只要加一个对应的<code>&lt;Div&gt;</code>加载js，提供shortname 和 当前链接 两个参数即可。</p>
<p>于是想在主题里加，翻了半天不知道在哪加好。然后看别人的主题都有评论，心想算了，还是换个主题吧，顺便换个对中国本土优化过的主题也好。改虽说不难，但改好看也不简单，不想在小事上费神。</p>
<p>看了半天，算是对 <strong>Next</strong> 和 <strong>Jacman</strong> 两个主题比较感兴趣，但试用效果并不是我想要的，最终换回了基于官方主题 <strong>landscape</strong> 的 <strong>landscape-plus</strong>，_config.yml里写明支持 <strong>多说</strong>。</p>
<p><strong>这里提醒大家，知乎上有关于Hexo主题的讨论，总结得挺好，至少比官方那几个主题候选强多了，大家可以去看一下。</strong></p>
<p>我想既然支持多说，disqus应该没问题吧，就搜了一下源码，发现加载位置原来在 <code>after-footer.ejs</code> ，果然也支持disqus，只是没提。</p>
<p>因为 <strong>landscape-plus</strong> 基于 <strong>landscape</strong>，我猜其实一开始就支持disqus了，就去翻源码，果然… 无端绕了一个圈，应该一开始就搜源码…就当见识一下其他主题吧，而且现在的主题虽然样子没变，对本土优化过也不坏。</p>
<p>实际上就是 <code>_config.yml</code> 里一行的事：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Disqus</span></div><div class="line"><span class="attr">disqus_shortname:</span> your_dqs_sn</div><div class="line"><span class="comment"># Duoshuo</span></div><div class="line"><span class="attr">duoshuo_shortname:</span> your_ds_sn</div></pre></td></tr></table></figure>
<p>几个要点：</p>
<ul>
<li><strong>landscape</strong> 只支持disqus</li>
<li><strong>landscape-plus</strong> 同时支持 disqus 和 多说，但是都配置的话，优先加载多说，然后忽略disqus</li>
<li>代码一眼就懂，只要知道位置就能自己动手修改：<code>themes/&lt;theme_name&gt;/layout/_partial/after-footer.ejs</code>，其他主题应该也类似</li>
<li>shortname 的配置写在主题的 <code>_config.yml</code>， 得写在全局配置，至少我是这样。估计是因为引用时是 <code>config.disqus_shortname</code> 而不是 <code>theme.disqus_shortname</code>。</li>
</ul>
<p>Updated: 我提了一个PR给landscape-plus，现在无论写在主题还是全局的配置，都可以加载。</p>
<h2 id="关于插入HTML代码-与-Hexo-的换行"><a href="#关于插入HTML代码-与-Hexo-的换行" class="headerlink" title="关于插入HTML代码 与 Hexo 的换行"></a>关于插入HTML代码 与 Hexo 的换行</h2><p>习惯使用 Markdown 的朋友知道，Markdown是支持直接写HTML代码的。</p>
<p>这点带来了很大的方便：Markdown 足够小巧简洁，满足大多数需要；一旦有超出支持范围的需求，大可临时写一下HTML。</p>
<p>但是，这点在Hexo，好像突然不满足了。我插入的HTML，变成了一堆很奇怪的东西。</p>
<p>翻生成出来的HTML，找到原因：hexo 在我每一行代码后面，都插了一个<code>&lt;br&gt;</code>…… 我回去再翻我的md文件，行末并没有两个空格。由此我发现了 Hexo 与官方 Markdown 的一个差别，就是Hexo 为了你写文章方便，不需要你行末加两个空格，都会给你一个<code>&lt;br&gt;</code>。</p>
<p>然而这点让我自己插入的HTML(准确说是MathML)成了这样：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mrow</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="tag">&lt;<span class="name">mi</span>&gt;</span>x<span class="tag">&lt;/<span class="name">mi</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="tag">&lt;<span class="name">mo</span>&gt;</span>=<span class="tag">&lt;/<span class="name">mo</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="tag">&lt;<span class="name">mfrac</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>...</div></pre></td></tr></table></figure>
<p>多了这么多<code>&lt;br&gt;</code>根本不能好好地被解析。</p>
<p>然后发现官方的处理方法是，加raw标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;% raw %&#125;</div><div class="line">some raw content</div><div class="line">&#123;% endraw %&#125;</div></pre></td></tr></table></figure>
<p>在里面的内容，会原样输出。详细说明在<a href="https://hexo.io/zh-cn/docs/tag-plugins.html#Raw" target="_blank" rel="external">官方文档这个地方</a>。</p>
<h2 id="404页、about页"><a href="#404页、about页" class="headerlink" title="404页、about页"></a>404页、about页</h2><p><s>404页我直接用了腾讯的404公益的代码，就是随便写一个最基本的HTML，然后在body部分加载以下js即可</s></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://www.qq.com/404/search_children.js"</span> charset=<span class="string">"utf-8"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>后来因为腾讯公益的404会替换整个页面，而且无法提供https的链接，我又改为使用<a href="http://yibo.iyiyun.com/Home/Index/web404" target="_blank" rel="external">益云的404</a>了。</p>
<p>在 <code>hexo/source</code> 下创建 404.md</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line"><span class="section">title: 抱歉，你要访问的网页没有找到...</span></div><div class="line">---</div><div class="line"></div><div class="line">&#123;% raw %&#125;</div><div class="line"><span class="xml"><span class="comment">&lt;!-- 你的益云404代码 --&gt;</span></span></div><div class="line">&#123;% endraw %&#125;</div></pre></td></tr></table></figure>
<p>至于about页，可以直接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new page about</div></pre></td></tr></table></figure>
<p>然后修改 <code>/source/about/index.md</code> 即可。跟写博文一样，最后生成出统一风格页面。</p>
<p>由于毕竟不是博文，提醒</p>
<ol>
<li>删掉时间</li>
<li>不要添加categories或者tags</li>
</ol>
<h2 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h2><p>首先要买一个域名。</p>
<p>这部分占个坑，有空补完…</p>
<h2 id="atom-和-sitemap"><a href="#atom-和-sitemap" class="headerlink" title="atom 和 sitemap"></a>atom 和 sitemap</h2><p>该章节参考了<a href="http://www.cnblogs.com/zhcncn/p/4097881.html" target="_blank" rel="external">Hexo搭建Github静态博客</a></p>
<p>分别要安装对应的插件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm install hexo-generator-feed --save</div><div class="line">npm install hexo-generator-sitemap --save</div><div class="line">npm install hexo-generator-baidu-sitemap --save</div></pre></td></tr></table></figure>
<p>稍微解释一下 <code>--save</code> 参数。有这个参数的情况下，对应的module会作为依赖自动写入当前目录的 <code>package.json</code> 。我是在 博客的根目录下执行的，那么会自动添加依赖。详情可以参考<a href="http://www.cnblogs.com/PeunZhang/p/5553574.html" target="_blank" rel="external">npm 常用命令详解</a> 。</p>
<p>然后在 <code>根目录\_config.yml</code> 添加以下内容来启用插件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="attr">Plugins:</span></div><div class="line"><span class="bullet">-</span> hexo-generator-feed</div><div class="line"><span class="bullet">-</span> hexo-generator-sitemap</div><div class="line"><span class="bullet">-</span> hexo-generator-baidu-sitemap</div><div class="line"></div><div class="line"><span class="comment">#sitemap</span></div><div class="line"><span class="attr">sitemap:</span></div><div class="line"><span class="attr">  path:</span> sitemap.xml</div><div class="line"><span class="attr">baidusitemap:</span></div><div class="line"><span class="attr">  path:</span> baidusitemap.xml</div><div class="line"></div><div class="line"><span class="comment">#Feed Atom</span></div><div class="line"><span class="attr">feed:</span></div><div class="line"><span class="attr">  type:</span> atom</div><div class="line"><span class="attr">  path:</span> atom.xml</div><div class="line"><span class="attr">  limit:</span> <span class="number">20</span></div></pre></td></tr></table></figure>
<p>如果想在导航上显示，可以在主题的 <code>_config.yml</code> 中添加 （最后两行是新增内容）</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Header</span></div><div class="line"><span class="attr">menu:</span></div><div class="line"><span class="attr">  Home:</span> /</div><div class="line"><span class="attr">  Archives:</span> /archives</div><div class="line"><span class="attr">  Github:</span> https://github.com/xxx</div><div class="line"><span class="attr">  About:</span> /about</div><div class="line"><span class="attr">  Sitemap:</span> /sitemap.xml</div><div class="line">  <span class="comment"># Baidusitemap: /baidusitemap.xml #这个主要是针对百度做过优化，更好被百度抓取，但是导航上没有必要显示两个</span></div><div class="line"><span class="attr">rss:</span> /atom.xml</div></pre></td></tr></table></figure>
<h2 id="在其他电脑配置已有的博客"><a href="#在其他电脑配置已有的博客" class="headerlink" title="在其他电脑配置已有的博客"></a>在其他电脑配置已有的博客</h2><p>2016/12/26 updated:</p>
<p>到了新岗位之后，发现在公司电脑也有更新博客的需求——在公司踩了的坑，要赶紧记下来，回家再写可能就忘了，而且到家太累有时也不愿意开电脑。</p>
<p>这个博客的源码放在我个人的笔记本上，生成的静态页面自然是通过git push到了github pages 上（也就是现在看到的页面）；源码我也用git管理着，push到了 bitbucket 的私人库上。在我的想象里，在公司电脑写hexo的步骤是：1.  安装node.js 和 hexo-cli ；2. git clone bitbucket 的源码；3. 跟在个人笔记本上一样，写完 <code>hexo g -d</code>。</p>
<p>我甚至都没验证一下，直接就操作了，结果一刷新，博客无法访问了！！仔细看public文件夹，发现根本没有处理，而是直接把source文件夹的内容拷贝过来而已。</p>
<p>这我才开始琢磨，发现博客目录下的 <code>node_modules</code> 目录是存放引用的node包的，而且是在init之后，安装，且只安装在这里，并非global。而自带的<code>.gitignore</code> 里是包括 <code>node_modules</code> 的，换言之源码的提交并没有包含它，git clone下来当然也会缺了对应的包。</p>
<p>那是不是改掉 <code>.gitignore</code> ，把这个目录页提交掉呢？我认为并不是，因为安装前后的时间差异，我两台电脑的node.js 和 hexo-cli 的版本并不一致，所以依赖的包的版本，乃至依赖的包都可能不一样，直接用同一个 <code>node_modules</code> 不一定能正常运行。所以我最后解决的办法如下：</p>
<ol>
<li>首先当然要确认新电脑 node.js / npm / hexo 已经安装配置好，可以任意目录执行。</li>
<li>新建一个空的博客的根目录，在里面 <code>hexo init</code>，让它安装基本的依赖。</li>
<li>上面提到需要的插件安装，都在这个根目录下执行一遍（就是那些带 <code>--save</code> 参数的）。</li>
<li>另起一个目录，把源码clone下来，然后全部覆盖到上面init 好的目录。</li>
<li>另起一个目录，把github pages 的库clone下来，然后覆盖到<code>.deploy_git</code> 目录。这步是为了让提交历史连续，对于成功发布不是必要的。</li>
<li>先 <code>hexo g</code> 观察一下 <code>public</code> 目录的输出，没问题再 <code>hexo d</code>。有任何问题，检查上面几步。</li>
</ol>
<h3 id="移动也会出错"><a href="#移动也会出错" class="headerlink" title="移动也会出错"></a>移动也会出错</h3><p>updated: 2017-1-4</p>
<p>上面说到，通过远程库的方式，在新电脑clone之后，因为node_modules目录被ignore掉了，所以不能正常运行，要重新init 和 安装插件。</p>
<p>今天整理本地目录，将博客的目录挪了位置，忽然发现也不能运行了。按说这个目录一起移动，<code>node_modules</code>里的东西都还在，不应该有什么问题。更神奇的时候，因为hexo-cli 是global安装，所以任意目录都能运行<code>hexo</code>，除了博客目录。</p>
<p>试验之后发现，虽然 init 时安装的依赖，是直接安装到node_modules下（如hexo-generator-archive，就是直接安装到同名目录下）；</p>
<p>但是加了<code>--save</code>参数手动安装的插件，安装方式却有所不同。那些插件是先安装到了一个带版本号的目录，然后再产生一个插件名（不带版本号）命名的软链。如abab，是先安装到<code>.1.0.3@abab</code>目录，然后再生成一个 abab 到该目录的软链。</p>
<p>问题就出在这个软链上。看得出来软链的本意是方便指向不同的版本。但因为软链是基于指向目标的绝对地址的，所以一旦挪动了目录，哪怕是一起挪动，相对路径不变，软链也会失效。而运行hexo 时，会根据根目录下的<code>package.json</code>去找依赖，手动安装的插件当然也在依赖之列；接下来会按名字寻找，找不带版本号的目录（其实是软链），因为软链失败，自然依赖检查也会出错。</p>
<p>由于init时安装的依赖没有问题，所以解决这个问题，只需要删掉那些带版本号的目录和相应的软链，然后重新手动安装插件就好。</p>
<hr>
<h2 id="未完待续…"><a href="#未完待续…" class="headerlink" title="未完待续…"></a>未完待续…</h2><p>其他发现的坑，也会陆续更新在这里。</p>
<hr>
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议"><br>本文为本人原创，采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议</a>进行许可。<br>本作品可自由复制、传播及基于本作品进行演绎创作。如有以上需要，请留言告知，在文章开头明显位置加上署名（Jayce Chant）、原链接及许可协议信息，并明确指出修改（如有），不得用于商业用途。谢谢合作。<br>详情请点击查看<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">协议</a>具体内容。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://jaycechant.info/2016/migrate-to-hexo/" data-id="cke8sf9if002xvkxldv361993" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="https://jaycechant.info/2016/migrate-to-hexo/#disqus_thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/trouble/">trouble</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/python-multi-env-for-win/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          在 Windows 搭建Python多版本环境
        
      </div>
    </a>
  
  
    <a href="/2016/intro-to-mathjax/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">MathJax 简介 与 实例</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go-语言实战/">Go 语言实战</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/刷题/">刷题</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/科普/">科普</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/粤语/">粤语</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 13.33px;">Algorithm</a> <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Android/" style="font-size: 11.67px;">Android</a> <a href="/tags/Android-sdk/" style="font-size: 10px;">Android-sdk</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/JCE/" style="font-size: 10px;">JCE</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/JavaMail/" style="font-size: 10px;">JavaMail</a> <a href="/tags/Jenkins/" style="font-size: 16.67px;">Jenkins</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 13.33px;">Markdown</a> <a href="/tags/Mathjax/" style="font-size: 10px;">Mathjax</a> <a href="/tags/OJ/" style="font-size: 10px;">OJ</a> <a href="/tags/Octopress/" style="font-size: 10px;">Octopress</a> <a href="/tags/OpenGrok/" style="font-size: 10px;">OpenGrok</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Syncthing/" style="font-size: 10px;">Syncthing</a> <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 11.67px;">Ubuntu</a> <a href="/tags/algorithm/" style="font-size: 11.67px;">algorithm</a> <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/blog/" style="font-size: 13.33px;">blog</a> <a href="/tags/byobu/" style="font-size: 11.67px;">byobu</a> <a href="/tags/ctags/" style="font-size: 10px;">ctags</a> <a href="/tags/dep/" style="font-size: 11.67px;">dep</a> <a href="/tags/document/" style="font-size: 10px;">document</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/file-system/" style="font-size: 10px;">file-system</a> <a href="/tags/flutter/" style="font-size: 10px;">flutter</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/glide/" style="font-size: 10px;">glide</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/how-to/" style="font-size: 16.67px;">how-to</a> <a href="/tags/jpg/" style="font-size: 10px;">jpg</a> <a href="/tags/json/" style="font-size: 11.67px;">json</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/node-js/" style="font-size: 11.67px;">node.js</a> <a href="/tags/nodePPT/" style="font-size: 11.67px;">nodePPT</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pgyer/" style="font-size: 10px;">pgyer</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/png/" style="font-size: 10px;">png</a> <a href="/tags/practice/" style="font-size: 11.67px;">practice</a> <a href="/tags/presentation/" style="font-size: 11.67px;">presentation</a> <a href="/tags/review/" style="font-size: 10px;">review</a> <a href="/tags/screen/" style="font-size: 11.67px;">screen</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/skill/" style="font-size: 13.33px;">skill</a> <a href="/tags/smtp/" style="font-size: 10px;">smtp</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/solution-report/" style="font-size: 10px;">solution-report</a> <a href="/tags/supervisor/" style="font-size: 10px;">supervisor</a> <a href="/tags/thought/" style="font-size: 10px;">thought</a> <a href="/tags/trouble/" style="font-size: 18.33px;">trouble</a> <a href="/tags/unfinished/" style="font-size: 13.33px;">unfinished</a> <a href="/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/tags/vsftp/" style="font-size: 10px;">vsftp</a> <a href="/tags/why/" style="font-size: 11.67px;">why</a> <a href="/tags/写作/" style="font-size: 13.33px;">写作</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/语言表达/" style="font-size: 10px;">语言表达</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">四月 2012</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/translation-language-design-in-the-service-of-software-engineering/">Go 在 Google：服务于软件工程的语言设计（翻译）</a>
          </li>
        
          <li>
            <a href="/2020/golang-in-action-day-1/">Go 语言实战（1）： 初识</a>
          </li>
        
          <li>
            <a href="/2020/leetcode-1504-count-submatrices/">LeetCode 解题：统计全 1 子矩阵</a>
          </li>
        
          <li>
            <a href="/2020/about-child-restraint-system/">聊聊儿童安全座椅</a>
          </li>
        
          <li>
            <a href="/2020/leetcode-23-merge-k-sorted-lists/">LeetCode 解题： 合并 K 个有序链表</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://hexo.io/zh-cn/" target="_blank">Hexo主页</a>
          </li>
        
          <li>
            <a href="https://hexo.io/zh-cn/docs/" target="_blank">Hexo文档</a>
          </li>
        
          <li>
            <a href="https://github.com/xiangming/landscape-plus" target="_blank">landscape-plus项目主页</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jayce Sigit Chant<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/list" class="mobile-nav-link">List</a>
  
    <a href="https://github.com/JayceChant" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">Sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<script>
  var disqus_shortname = 'jaycetb';
  
  var disqus_url = 'https://jaycechant.info/2016/migrate-to-hexo/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>



<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
