
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>在 Windows 搭建Python多版本环境 | 存档Save&amp;Load</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="高中开始听说Python，大概大三到大四之间尝试动手写。毕业后成为了一个Android码农，Python不是主力语言，零零星星写过一些顺手的小东西，而且主要在公司。
家里电脑本来就用得不多，还经历了多次重装。旧电脑全格了，从Win+Linux双系统变成了Linux专用；新电脑经历了升Win10之后几次系统崩溃C盘重置，后来又从32改64。
D盘的东西虽然还在，但各种配置乱得不行。这会要写Pytho">
<meta property="og:type" content="article">
<meta property="og:title" content="在 Windows 搭建Python多版本环境">
<meta property="og:url" content="https://jaycechant.info/2016/python-multi-env-for-win/index.html">
<meta property="og:site_name" content="存档Save&Load">
<meta property="og:description" content="高中开始听说Python，大概大三到大四之间尝试动手写。毕业后成为了一个Android码农，Python不是主力语言，零零星星写过一些顺手的小东西，而且主要在公司。
家里电脑本来就用得不多，还经历了多次重装。旧电脑全格了，从Win+Linux双系统变成了Linux专用；新电脑经历了升Win10之后几次系统崩溃C盘重置，后来又从32改64。
D盘的东西虽然还在，但各种配置乱得不行。这会要写Pytho">
<meta property="og:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
<meta property="og:updated_time" content="2017-01-25T04:21:21.984Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在 Windows 搭建Python多版本环境">
<meta name="twitter:description" content="高中开始听说Python，大概大三到大四之间尝试动手写。毕业后成为了一个Android码农，Python不是主力语言，零零星星写过一些顺手的小东西，而且主要在公司。
家里电脑本来就用得不多，还经历了多次重装。旧电脑全格了，从Win+Linux双系统变成了Linux专用；新电脑经历了升Win10之后几次系统崩溃C盘重置，后来又从32改64。
D盘的东西虽然还在，但各种配置乱得不行。这会要写Pytho">
<meta name="twitter:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
  
    <link rel="alternative" href="/atom.xml" title="存档Save&amp;Load" type="application/atom+xml">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">存档Save&amp;Load</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">存档意味着放下包袱，搞砸了不过回来读档</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/collections">Collections</a>
        
          <a class="main-nav-link" href="https://github.com/JayceChant">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/sitemap.xml">Sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="jaycechant.info">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-python-multi-env-for-win" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/python-multi-env-for-win/" class="article-date">
  <time datetime="2016-07-12T07:21:27.000Z" itemprop="datePublished">2016-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      在 Windows 搭建Python多版本环境
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>高中开始听说Python，大概大三到大四之间尝试动手写。毕业后成为了一个Android码农，Python不是主力语言，零零星星写过一些顺手的小东西，而且主要在公司。</p>
<p>家里电脑本来就用得不多，还经历了多次重装。旧电脑全格了，从Win+Linux双系统变成了Linux专用；新电脑经历了升Win10之后几次系统崩溃C盘重置，后来又从32改64。</p>
<p>D盘的东西虽然还在，但各种配置乱得不行。这会要写Python，各种配置都要重新弄。反正都好几年前装的，干脆重新安装配置一遍。</p>
<p>不看不知道，果然很多东西都变了。</p>
<a id="more"></a>
<hr>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>正文写得很零碎，这里给个结论：</p>
<ul>
<li>如果你有同时用2、3的需求，分别安装2 和 3的最新版本（2.5这种古董还是别碰，焦头烂额），然后通过在代码开头写Shebang指定用哪个解析器执行。</li>
<li>包管理用pip。作为Python包管理的事实标准，流行的包都会注册到pip。你知道包名之后，要用不过是一句 <code>pip install 包名</code>。</li>
<li>如果更进一步，你的不同项目之间要依赖不同版本的包，用virtualenv 来管理你的包。</li>
<li>虽然Python用Notepad++ 写然后执行完全没有问题，但即使老司机也有大意的时候，新手更应该培养良好的编程规范，<a href="https://www.jetbrains.com/pycharm/download/" target="_blank" rel="external">PyCharm</a> 是个不错的选择，特别是Community版本免费，对于绝大多数人而言都是够用的了。</li>
</ul>
<hr>
<p>四年前写过<a href="/2012/make-python-2x-coexist-with-3x-on-Win/">一篇文章</a>记录当时Win上配置Python2+3，现在看做法各种过时。譬如说2011年才发起的pip在当年我还不知道，现在已经成为了包管理器的事实标准。</p>
<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><p>四年间不怎么关注Python的消息，居然也大概知道pip。然后查了一下目前主流的包管理器的对比，发现<a href="http://zengrong.net/post/2169.htm" target="_blank" rel="external">《Python 包管理工具解惑》</a> 写得比较好。</p>
<p>不看不知道，包管理相关的工具已经有这么多！</p>
<ul>
<li>distutils</li>
<li>setuptools</li>
<li>distribute</li>
<li>disutils2</li>
<li>distlib</li>
<li>pip</li>
</ul>
<p>结论是<strong>pip已经成为了事实标准</strong>，所以默认情况下用pip，遇到特殊情况再考虑别的。详情看那篇文章，不再展开。（考虑到作者换博客等因素，文章链接可能失效，到时只好用标题搜搜看。）</p>
<h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>同样的事情我在Ubuntu上也折腾过一遍。Python对Linux友好太多，很简单的就弄完了。简单过一遍，用来跟Windows对照。（当然，简单还有一部分原因是，我没在Ubuntu装2.5）</p>
<p>没记错的话，Ubuntu自带Python2.7，所以我只要装Python3，然后分别装pip就好</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install python3</div><div class="line">$ sudo apt-get install python-pip</div><div class="line">$ sudo apt-get install python3-pip</div></pre></td></tr></table></figure>
<p>这之后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ python --version</div><div class="line">Python 2.7.6</div><div class="line">$ python3 --version</div><div class="line">Python 3.4.3</div><div class="line">$ pip --version</div><div class="line">pip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)</div><div class="line">$ pip2 --version</div><div class="line">pip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)</div><div class="line">$ pip3 --version</div><div class="line">pip 1.5.4 from /usr/lib/python3.4/dist-packages (python 3.4)</div></pre></td></tr></table></figure>
<p>Ubuntu 自带的pip版本太旧，要升级一下</p>
<p><em>warning</em> : 如果是在Windows升级，请使用 <code>python -m pip</code>，原因详见 <a href="../trap-while-upgrading-pip/">《升级 pip 时的一个坑》</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ pip install --upgrade pip</div><div class="line">$ pip3 install --upgrade pip</div><div class="line">$ pip --version</div><div class="line">pip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)</div><div class="line">$ pip2 --version</div><div class="line">pip 8.1.2 from /usr/<span class="built_in">local</span>/lib/python2.7/dist-packages (python 2.7)</div><div class="line">$ pip3 --version</div><div class="line">pip 8.1.2 from /usr/<span class="built_in">local</span>/lib/python3.4/dist-packages (python 3.4)</div></pre></td></tr></table></figure>
<p>这里就让我疑惑了，为什么唯独<code>pip</code>没有生效呢？我把PATH输出来</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">echo</span> <span class="variable">$PATH</span></div><div class="line">/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/usr/sbin:/usr/bin:...</div></pre></td></tr></table></figure>
<p>确实是local的在前面。而且我看了这三个名字的script，内容都是一样的。不过我还没搞清楚原因，第二天开机，就都变成8.1.2了。原因大概能猜到一二，但除非重头折腾，已经无法验证了。如果有大牛知道详细原因，欢迎留言告知。</p>
<p>看到这里，相信大家已经懂得，分别用 <code>python</code> V.S. <code>python3</code>，以及 <code>pip</code> 或 <code>pip2</code> V.S. <code>pip3</code>  就可以调用对应的版本了。</p>
<p>果安装了更多的版本，譬如不止一个Python2，有2.5 和 2.7，那么还可以更具体地区分pip，那就是直接 <code>pip-2.5</code> VS <code>pip2.7</code>。（pip某个版本以前，规则是<code>pip-&lt;ver&gt;</code>，之后变成了<code>pip&lt;ver&gt;</code>。支持2.5的都是老版本，所以带有横杠。详情可以查看 <code>/usr/local/bin</code> 里都有哪些文件。）</p>
<p>这是在bash执行 <code>python xx.py</code> 的情况，那如果是直接给执行权限当脚本跑呢？ 写shebang！在脚本开头写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#! /usr/bin/python</span></div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#! /usr/bin/python3</span></div></pre></td></tr></table></figure>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><h3 id="双-Python-for-win"><a href="#双-Python-for-win" class="headerlink" title="双 Python for win"></a>双 Python for win</h3><p>Windows 这边，我选择的组合是 Python 2.5 + Python 3.4。</p>
<p>选择2.5的原因是，虽然2.5 和 2.6/2.7 都是 2.x , 但只有 ≤2.5 才是纯粹的2.x， 2.6/2.7 其实是已经引入了 3.x 语法的过渡版本。<br>2.6/2.7 的代码固然不能在2.5上跑，而2.5 on 2.6/2.7 虽然大多跑得过，也往往存在某些不可预料的结果。（网上很容易搜到例子）<br>我主要还是写3.x的，所以两个系统都装了3.4，但是难免有需要跑一些陈年代码的时候，考虑到Ubuntu自带2.7，Windows就装2.5了。</p>
<p><strong>都安装上是没有难度的，问题是运行。</strong></p>
<p>这涉及到3种运行情况：</p>
<ol>
<li>双击执行 <code>*.py</code> 文件（CLI，也就是纯CMD）</li>
<li>双击执行 <code>*.py</code> 文件（GUI，也就是通过PyQt一类库实现了界面的）</li>
<li>在CMD窗口里执行，同样分以上两种情况</li>
</ol>
<p>两个版本都刚安装完的时候，默认的情况应该是：</p>
<p>1、2 都是哪个在后面安装就调用哪个。因为在Windows，双击执行靠的是文件类型关联，如果安装的时候都有执行文件关联的话（我记得默认这个是有选上的），那么后面的会覆盖前面的。<br>换言之，<strong>假设我主要用 3.x ，那么先装 2.x 再装 3.x ，那么双击运行的都是 3.x ，2.x 就调用不了了。</strong></p>
<p>第3种情况，命令行里执行 <code>python xxx.py</code> ， 如果你没有去系统的Path环境变量添加这两个Python的话，实际上系统会找不到 python。然后如果你往Path里 把两个的 bin 目录都加进去，由于搜索是从前往后寻找，命中就结束，所以是<strong>哪个在Path里靠前执行哪个，靠后不起作用。</strong></p>
<h4 id="随时指定版本"><a href="#随时指定版本" class="headerlink" title="随时指定版本"></a>随时指定版本</h4><p>那么现在的问题就是，如何在不重新安装，以及不修改Path的值的情况下，随时指定Python的版本。（四年前我的方案是，新建一个环境变量放进Path，然后通过批处理修改该变量的指向来解决情况3，没有解决1、2。当然四年前也还没有PEP397）</p>
<p><a href="https://www.python.org/dev/peps/pep-0397/" target="_blank" rel="external">PEP397</a> 给出了官方解决方案。</p>
<p>详细内容大家可以点进去自己看。核心内容是，安装3.3 以上版本时（这样才包含PEP397），会在 <code>C:\Windows\</code>下放一个启动器 <code>py.exe</code>，通过启动器运行，可以用参数指定启动的版本。</p>
<h4 id="命令行参数指定"><a href="#命令行参数指定" class="headerlink" title="命令行参数指定"></a>命令行参数指定</h4><figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; py-<span class="number">2</span> xxx.py</div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; py-<span class="number">3</span> xxx.py</div></pre></td></tr></table></figure>
<p>当然，如果你装的版本更多，你可以指定得更详细，譬如</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt; py-<span class="number">3</span>.<span class="number">3</span> xxx.py</div></pre></td></tr></table></figure>
<p>但是如果指定的版本不存在，那么就会报错</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Requested Python version (<span class="number">3</span>.<span class="number">3</span>) <span class="keyword">not</span> installed</div></pre></td></tr></table></figure>
<p>本质上，<code>py.exe</code> 只是接收了第一个参数，然后查找参数对应的版本的 <code>python.exe</code>，然后把剩下的参数转给它。同样在 <code>C:\Windows\</code>下另外还有一个 <code>pyw.exe</code> 对应 <code>pythonw.exe</code>。</p>
<p>不过每次都要指定也太烦了，每次运行前都要先想想这是哪个版本的代码，这个其实不是在写的时候已经决定好了吗？跟Linux类似地，还是写shebang。</p>
<h4 id="Shebang-指定"><a href="#Shebang-指定" class="headerlink" title="Shebang 指定"></a>Shebang 指定</h4><p>个人认为Windows 下面的，严格来说应该不算shebang，只是模仿了这种形式。毕竟在Linux下，shebang所以是写给shell解析的，而这里其实是给 py.exe 解析的。  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!python2</span></div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!python3</span></div></pre></td></tr></table></figure>
<p>如果我们写的是跨平台的代码，Windows和Linux都要跑呢？这种伪shebang  在 Linux并不被接受。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bash: ./test_shebang.py: python3: 解释器错误: 没有那个文件或目录</div></pre></td></tr></table></figure>
<p>很简单，两边都写Linux风的shebang就好了。即使Windows下并不存在 <code>/usr/bin/python3</code> 这么个东西，一样可以运行。（所以才说它是个伪shebang，其实只是给py 解析的参数而已）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python3</span></div></pre></td></tr></table></figure>
<h4 id="双击执行"><a href="#双击执行" class="headerlink" title="双击执行"></a>双击执行</h4><p>双击执行当然没办法给 <code>-2</code> 这样的参数，所以要在代码里面写上shebang。</p>
<p>同时为了让它生效，必须确认 <code>.py</code> 文件关联的是 <code>py.exe</code>，而不是某个版本的 <code>python.exe</code>。<br>对着某个 <code>.py</code> 文件，右键查看属性 -&gt; 打开方式，确认一下。<br>如果最后安装的是Python3.3 以上的版本，貌似会自动给关联 <code>py.exe</code>。不过不是也没关系，自己改过来就好。</p>
<p>类似的，如果是GUI程序，可以把后缀改为 <code>.pyw</code>，同时关联 <code>pyw.exe</code>。<br>嗯……其实区别只是，<code>pyw.exe</code> 会将调用转给 <code>pythonw.exe</code>，跟 <code>python.exe</code> 相比，运行时不会显示命令行黑窗 （因为有GUI给你看嘛，还看什么小黑窗）。调试的时候，可以临时把文件名改为 <code>.py</code> 看输出。<br>不过，个人更推荐使用 <code>logging</code> 输出详细的调试信息。</p>
<h3 id="pip-for-win"><a href="#pip-for-win" class="headerlink" title="pip for win"></a>pip for win</h3><p>要庆幸的是，Python3.4 for win 已经自带了 pip。所以我只要为2.5安装即可。</p>
<p>实测发现，2.5实在太旧了（2.5的时代还没有pip吧），用pip自动安装2.5下的包，基本都会出错（其实是选了声明支持2.x 的包，结果里面有2.6以上的语法，会出错），<strong>所以给2.5安装pip实用价值不大。</strong> 我装2.5 本来就是为可能的测试预留的，没有必要花大力气，真有需要也可以setuptools 安装，所以最后放弃了折腾。</p>
<p>如果是Windows下的2.7 安装pip:</p>
<ol>
<li>安装对应版本的setuptools<br> <a href="https://pypi.python.org/pypi/setuptools" target="_blank" rel="external">setuptools</a> ，留意不同版本的安装方法略有差别</li>
<li><a href="https://pypi.python.org/pypi/pip" target="_blank" rel="external">pip</a> ，下载对应的pip包并解压，在解压后的目录执行  <code>&gt; py -2 setup.py install</code></li>
</ol>
<p>这之后，就可以</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;py -<span class="number">2</span> -m pip</div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;py -<span class="number">3</span> -m pip</div></pre></td></tr></table></figure>
<p><s>不方便的地方是，没有 pip2 / pip3 …… </s><br>其实是有的，不过要先将各个版本安装目录下的 <code>Scripts</code> 目录加入Path 环境变量。</p>
<p>加入之后，<code>pip</code> 指向的版本，取决于你将哪个目录放在前（因为两边都有pip，看哪个先命中），然后具体指定版本，就要看Scripts下都有那些文件了。3.x 下应该 <code>pip3</code> 和 <code>pip3.x</code>都有，但是2.5 下 只有 <code>pip-2.5</code> 没有 <code>pip2</code> （其实跟上面Linux下的情况基本一致）。</p>
<h1 id="Virtualenv"><a href="#Virtualenv" class="headerlink" title="Virtualenv"></a>Virtualenv</h1><p>暂时对于多版本环境需要不是特别大，之后用到再详细写。</p>
<hr>
<p><strong><em>以下是针对2.5的操作，包含不必要的试错，主要是无用功，留作供我日后参考。</em></strong></p>
<p>跟2.7类似，也是两步</p>
<ol>
<li><p>安装setuptools。因为支持2.5的setuptools是1.x版本，不能用最新的，而要用这个链接 <a href="https://raw.githubusercontent.com/pypa/setuptools/bootstrap-py24/ez_setup.py" target="_blank" rel="external">Setuptools 1.x</a></p>
</li>
<li><p>下载最新的支持Python2 的pip包，当前这个时刻是<a href="https://pypi.python.org/pypi/pip/8.1.2" target="_blank" rel="external">8.1.2</a>，解压，在解压后的目录执行 <code>&gt; py -2 setup.py install</code></p>
</li>
</ol>
<p>结果报语法错误。仔细一看，原来 8.1.2 最老只支持 2.6，重新找，又下载了 支持 2.5 的 1.4.1。结果依然有语法错误。但是这次支持版本信息没错啊，只好自己去看报错信息。</p>
<p>看代码的结论是，pip1.4.1 声称支持 Python2.5，它还是引入了Python2.6 为 Python3 准备的过渡语法 <code>b&#39;&#39;</code>，以至于一运行就有错误。实际上支持2.5的最新pip版本是 <a href="https://pypi.python.org/pypi/pip/1.3.1" target="_blank" rel="external">pip1.3.1</a>。</p>
<p>折腾至此，实际上已经费了好多时间和精力，总算把 pip1.3.1 给 2.5 安上了。那么我就来安装一些包看看。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&gt;pip-<span class="number">2</span>.<span class="number">5</span> install virtualenv</div><div class="line">Downloading/unpacking virtualenv</div><div class="line"><span class="function">Exception:</span></div><div class="line">...</div><div class="line">...</div><div class="line">    <span class="title">raise</span> <span class="title">NoSSLError</span>()</div><div class="line"><span class="title">NoSSLError</span>:</div><div class="line">###################################################################</div><div class="line">##  <span class="title">You</span> <span class="title">don</span>'<span class="title">t</span> <span class="title">have</span> <span class="title">an</span> <span class="title">importable</span> <span class="title">ssl</span> <span class="title">module</span>. <span class="title">You</span> <span class="title">are</span> <span class="title">most</span>        ##</div><div class="line">##  <span class="title">likely</span> <span class="title">using</span> <span class="title">Python</span> 2.5, <span class="title">which</span> <span class="title">did</span> <span class="title">not</span> <span class="title">include</span> <span class="title">ssl</span>           ##</div><div class="line">##  <span class="title">support</span> <span class="title">by</span> <span class="title">default</span>. <span class="title">In</span> <span class="title">this</span> <span class="title">state</span>, <span class="title">we</span> <span class="title">can</span> <span class="title">not</span> <span class="title">provide</span>        ##</div><div class="line">##  <span class="title">ssl</span> <span class="title">certified</span> <span class="title">downloads</span> <span class="title">from</span> <span class="title">PyPI</span>.                           ##</div><div class="line">##                                                               ##</div><div class="line">##  <span class="title">You</span> <span class="title">can</span> <span class="title">do</span> <span class="title">one</span> <span class="title">of</span> 2 <span class="title">things</span>:                                  ##</div><div class="line">##   1) <span class="title">Install</span> <span class="title">this</span>: <span class="title">https</span>://<span class="title">pypi.python.org</span>/<span class="title">pypi</span>/<span class="title">ssl</span>/          ##</div><div class="line">##      (<span class="title">It</span> <span class="title">provides</span> <span class="title">ssl</span> <span class="title">support</span> <span class="title">for</span> <span class="title">older</span> <span class="title">Pythons</span> )             ##</div><div class="line">##   2) <span class="title">Use</span> <span class="title">the</span> --<span class="title">insecure</span> <span class="title">option</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">this</span> <span class="title">insecurity</span>       ##</div><div class="line">##                                                               ##</div><div class="line">##  <span class="title">For</span> <span class="title">more</span> <span class="title">details</span>, <span class="title">go</span> <span class="title">to</span> <span class="title">the</span>  "<span class="title">SSL</span> <span class="title">Certificate</span> <span class="title">Verification</span>"  ##</div><div class="line">##  <span class="title">section</span> <span class="title">located</span> <span class="title">here</span>:                                        ##</div><div class="line">##     <span class="title">http</span>://<span class="title">www.pip</span>-<span class="title">installer.org</span>/<span class="title">en</span>/<span class="title">latest</span>/<span class="title">logic.html</span>         ##</div><div class="line">##                                                               ##</div><div class="line">###################################################################</div></pre></td></tr></table></figure>
<p>2.5 默认没有SSL包，而pip需要用SSL下载包……</p>
<p>好，我先安装SSL总可以吧</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;pip-<span class="number">2</span>.<span class="number">5</span> install ssl</div><div class="line">Downloading/unpacking ssl</div><div class="line"><span class="function">Exception:</span></div><div class="line">...</div><div class="line">...</div><div class="line">    <span class="title">raise</span> <span class="title">NoSSLError</span>()</div><div class="line"><span class="title">NoSSLError</span>:</div></pre></td></tr></table></figure>
<p>变成了先有鸡还是现有蛋的死循环了…</p>
<p>那我关掉加密传输不要SSL总可以了吧…</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;pip-<span class="number">2</span>.<span class="number">5</span> install virtualenv --insecure</div><div class="line">Downloading/unpacking virtualenv</div><div class="line">  Downloading virtualenv-<span class="number">15</span>.<span class="number">0</span>.<span class="number">2</span>.tar.gz (<span class="number">1</span>.<span class="number">8</span>MB): <span class="number">1</span>.<span class="number">8</span>MB downloaded</div><div class="line">  Running setup.py egg_info <span class="keyword">for</span> package virtualenv</div><div class="line">    ...\virtualenv\setup.py:<span class="number">51</span>: Warning: 'with' will become a reserved keyword <span class="keyword">in</span> Python <span class="number">2</span>.<span class="number">6</span></div><div class="line">    Traceback (most recent <span class="keyword">call</span> last):</div><div class="line">      File "&lt;string&gt;", line <span class="number">16</span>, <span class="keyword">in</span> &lt;module&gt;</div><div class="line">      File "...\virtualenv\setup.py", line <span class="number">51</span></div><div class="line">        with open(os.<span class="built_in">path</span>.join(here, *paths)) as f:</div><div class="line">                ^</div><div class="line"><span class="function">    SyntaxError: <span class="title">invalid</span> <span class="title">syntax</span></span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>额，又是引进了 2.6 的语法，这次是关键字 <code>with</code>…</p>
<p>看来 pip 对 2.5 并不友好。pip 的本意是包管理的自动化。如此折腾就违反初衷了。反正 2.5 不是用来开发用的，偶尔需要什么包，手动安装一下也不费什么事，所以就此打住，不折腾pip了。</p>
<hr>
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议"><br>本文为本人原创，采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议</a>进行许可。<br>本作品可自由复制、传播及基于本作品进行演绎创作。如有以上需要，请留言告知，在文章开头明显位置加上署名（Jayce Chant）、原链接及许可协议信息，并明确指出修改（如有），不得用于商业用途。谢谢合作。<br>详情请点击查看<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">协议</a>具体内容。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://jaycechant.info/2016/python-multi-env-for-win/" data-id="ck7qdfwag001eioxlue62wr43" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="https://jaycechant.info/2016/python-multi-env-for-win/#disqus_thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pip/">pip</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/trouble/">trouble</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/unfinished/">unfinished</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/virtualenv/">virtualenv</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/backup-tips-about-syncthing/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          用 Syncthing 备份的技巧
        
      </div>
    </a>
  
  
    <a href="/2016/migrate-to-hexo/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">博客迁移到了Hexo（附折腾记录）</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Android/" style="font-size: 11.67px;">Android</a> <a href="/tags/Android-sdk/" style="font-size: 10px;">Android-sdk</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/JCE/" style="font-size: 10px;">JCE</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/JavaMail/" style="font-size: 10px;">JavaMail</a> <a href="/tags/Jenkins/" style="font-size: 16.67px;">Jenkins</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 13.33px;">Markdown</a> <a href="/tags/Mathjax/" style="font-size: 10px;">Mathjax</a> <a href="/tags/OJ/" style="font-size: 10px;">OJ</a> <a href="/tags/Octopress/" style="font-size: 10px;">Octopress</a> <a href="/tags/OpenGrok/" style="font-size: 10px;">OpenGrok</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Syncthing/" style="font-size: 10px;">Syncthing</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 11.67px;">Ubuntu</a> <a href="/tags/algorithm/" style="font-size: 11.67px;">algorithm</a> <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/blog/" style="font-size: 13.33px;">blog</a> <a href="/tags/byobu/" style="font-size: 11.67px;">byobu</a> <a href="/tags/ctags/" style="font-size: 10px;">ctags</a> <a href="/tags/dep/" style="font-size: 11.67px;">dep</a> <a href="/tags/document/" style="font-size: 10px;">document</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/file-system/" style="font-size: 10px;">file-system</a> <a href="/tags/flutter/" style="font-size: 10px;">flutter</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/glide/" style="font-size: 10px;">glide</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/how-to/" style="font-size: 16.67px;">how-to</a> <a href="/tags/json/" style="font-size: 11.67px;">json</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/node-js/" style="font-size: 11.67px;">node.js</a> <a href="/tags/nodePPT/" style="font-size: 11.67px;">nodePPT</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pgyer/" style="font-size: 10px;">pgyer</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/practice/" style="font-size: 11.67px;">practice</a> <a href="/tags/presentation/" style="font-size: 10px;">presentation</a> <a href="/tags/screen/" style="font-size: 11.67px;">screen</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/skill/" style="font-size: 13.33px;">skill</a> <a href="/tags/smtp/" style="font-size: 10px;">smtp</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/solution-report/" style="font-size: 10px;">solution-report</a> <a href="/tags/supervisor/" style="font-size: 10px;">supervisor</a> <a href="/tags/trouble/" style="font-size: 18.33px;">trouble</a> <a href="/tags/unfinished/" style="font-size: 13.33px;">unfinished</a> <a href="/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/tags/vsftp/" style="font-size: 10px;">vsftp</a> <a href="/tags/why/" style="font-size: 11.67px;">why</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">四月 2012</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/flutter-kickoff/">Flutter 踩坑流水账</a>
          </li>
        
          <li>
            <a href="/2020/golang-1-13-env-for-win/">配置 1.13+ 的 golang 环境（Windows 篇）</a>
          </li>
        
          <li>
            <a href="/2020/correct-way-to-delete-an-opened-file/">删除打开文件的正确方法（Linux）</a>
          </li>
        
          <li>
            <a href="/2020/golang-1-13-module-VS-package/">golang 1.13 - module VS package</a>
          </li>
        
          <li>
            <a href="/2020/setup-golang-env-for-1-13-and-above/">配置 1.13+ 的 golang 环境</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://hexo.io/zh-cn/" target="_blank">Hexo主页</a>
          </li>
        
          <li>
            <a href="https://hexo.io/zh-cn/docs/" target="_blank">Hexo文档</a>
          </li>
        
          <li>
            <a href="https://github.com/xiangming/landscape-plus" target="_blank">landscape-plus项目主页</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jayce Sigit Chant<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/collections" class="mobile-nav-link">Collections</a>
  
    <a href="https://github.com/JayceChant" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">Sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<script>
  var disqus_shortname = 'jaycetb';
  
  var disqus_url = 'https://jaycechant.info/2016/python-multi-env-for-win/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
