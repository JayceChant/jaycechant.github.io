
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>LeetCode 解题：统计全 1 子矩阵 | 存档Save&amp;Load</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="上周末试着参加了一下 LeetCode 的周赛。">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode 解题：统计全 1 子矩阵">
<meta property="og:url" content="https://jaycechant.info/2020/leetcode-1504-count-submatrices/index.html">
<meta property="og:site_name" content="存档Save&Load">
<meta property="og:description" content="上周末试着参加了一下 LeetCode 的周赛。">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-try-dp.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-extreme-matrix.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-1d-dp.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-2d-to-1d.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-submat-with-same-right-bottom-point.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-extreme-matrix-2.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-extreme-matrix-3.svg">
<meta property="og:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-height-stack.svg">
<meta property="og:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
<meta property="og:updated_time" content="2020-08-12T09:21:58.819Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeetCode 解题：统计全 1 子矩阵">
<meta name="twitter:description" content="上周末试着参加了一下 LeetCode 的周赛。">
<meta name="twitter:image" content="https://jaycechant.info/../../images/leetcode1504/leetcode1504-try-dp.svg">
  
    <link rel="alternative" href="/atom.xml" title="存档Save&amp;Load" type="application/atom+xml">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">存档Save&amp;Load</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">存档意味着放下包袱，搞砸了不过回来读档</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/list">List</a>
        
          <a class="main-nav-link" href="https://github.com/JayceChant">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/sitemap.xml">Sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
      </nav>
      
      <div id="search-form-wrap">
        <form action="" accept-charset="utf-8" class="search-form">
          <input id="searchtext" type="search" name="q" maxlength="20" class="search-form-input" placeholder="Search" onkeypress="if(event.keyCode==13){document.getElementById('searchsub').click();return false;}">
          <input id="searchsub" type="submit" value="" class="search-form-submit" onclick="window.open('https://global.bing.com/search?&amp;q=site:jaycechant.info '+document.getElementById('searchtext').value, '_blank')">
        </form>
      </div>
      
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-leetcode-1504-count-submatrices" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/leetcode-1504-count-submatrices/" class="article-date">
  <time datetime="2020-07-10T13:05:25.000Z" itemprop="datePublished">2020-07-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/刷题/">刷题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      LeetCode 解题：统计全 1 子矩阵
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上周末试着参加了一下 LeetCode 的周赛。</p>
<a id="more"></a>
<blockquote>
<p>文章是 7/10 写的，所以这里指的是 7/5 的周赛</p>
</blockquote>
<p>90 分钟，总共四题，分别一题简单，两题中等，一题困难。在我看来，第 1、2 题都算简单，第 3 题的中等我很多年前做过；只有第 4 题最优解要用到比较少见的算法，不过还是有网友暴力解通过。</p>
<p>就是这样的难度，第 2 题一开始没反应过来，先做后面，然后在第 3 题耗费了太多时间（约 1H），留给 2 、4 的时间都不太够，最后只 AC  1、3。相比之下，最快的参加者 17 分钟全部 AC。自尊心受到暴击，只能用刚刚恢复刷题，太生疏给自己台阶。做的时候感觉很顺畅，回头一看时间，都不知道怎么跑掉的。是中年人反应迟钝了吗？</p>
<p>不管怎样，3、4 题还是值得说一下的。今天先讲第 3 题，对应 1504 号。</p>
<p>英文：<a href="https://leetcode.com/problems/count-submatrices-with-all-ones/" target="_blank" rel="external">https://leetcode.com/problems/count-submatrices-with-all-ones/</a></p>
<p>中文：<a href="https://leetcode-cn.com/problems/count-submatrices-with-all-ones/" target="_blank" rel="external">https://leetcode-cn.com/problems/count-submatrices-with-all-ones/</a></p>
<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><h3 id="一句话概括"><a href="#一句话概括" class="headerlink" title="一句话概括"></a>一句话概括</h3><p>给定由 0, 1 组成的矩阵，<strong>求 元素全是 1 的子矩阵</strong> 的数量。</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">输入：</div><div class="line">1,0,1</div><div class="line">1,1,0</div><div class="line">1,1,0</div><div class="line"></div><div class="line">输出：13</div><div class="line"></div><div class="line">解释：</div><div class="line">有 6 个 1x1 的矩形。</div><div class="line">有 2 个 1x2 的矩形。</div><div class="line">有 3 个 2x1 的矩形。</div><div class="line">有 1 个 2x2 的矩形。</div><div class="line">有 1 个 3x1 的矩形。</div><div class="line">矩形数目总共 = 6 + 2 + 3 + 1 + 1 = 13</div></pre></td></tr></table></figure>
<p>更多例子看测试用例</p>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><ul>
<li>行列最小 1，最大 150</li>
<li>矩阵元素只有 0 和 1</li>
</ul>
<p>为了后续方便讨论，约定行数为 R，列数为 C。</p>
<h2 id="测试代码先行"><a href="#测试代码先行" class="headerlink" title="测试代码先行"></a>测试代码先行</h2><blockquote>
<p>《<a href="../rapidly-generate-unit-tests-in-vs-code/">如何快速生成单元测试</a>》</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="string">"testing"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_numSubmat</span><span class="params">(t *testing.T)</span></span> &#123;</div><div class="line">	tests := []<span class="keyword">struct</span> &#123;</div><div class="line">		name <span class="keyword">string</span></div><div class="line">		mat  [][]<span class="keyword">int</span></div><div class="line">		want <span class="keyword">int</span></div><div class="line">	&#125;&#123;</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"min0"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">0</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">0</span>,</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"min1"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">1</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">1</span>,</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"1"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">13</span>,</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"2"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</div><div class="line">				&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">24</span>,</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"3"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">21</span>,</div><div class="line">		&#125;,</div><div class="line">		&#123;</div><div class="line">			name: <span class="string">"4"</span>,</div><div class="line">			mat: [][]<span class="keyword">int</span>&#123;</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</div><div class="line">				&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</div><div class="line">				&#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</div><div class="line">			&#125;,</div><div class="line">			want: <span class="number">5</span>,</div><div class="line">		&#125;,</div><div class="line">        <span class="comment">// 现在 LeetCode 周赛一次错误提交只罚时 5 分钟，代价不算大</span></div><div class="line">        <span class="comment">// 简单添加一些能马上想到的 case 即可，折腾超过 5 分钟不值</span></div><div class="line">        <span class="comment">// 能通过简单的 case 可以先提交一次，不行再针对强化</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</div><div class="line">		t.Run(tt.name, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span> &#123;</div><div class="line">			<span class="keyword">if</span> got := numSubmat(tt.mat); got != tt.want &#123;</div><div class="line">				t.Errorf(<span class="string">"numSubmat() = %v, want %v"</span>, got, tt.want)</div><div class="line">			&#125;</div><div class="line">		&#125;)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><p>暴力做法非常简单，一句话带过：首先 O(RC) 遍历左上角选点，然后 O(RC) 遍历右下角选点，再用 O(RC) 判断选定的矩阵是否全 1，<strong>时间复杂度为 O((RC)^3)</strong> ，空间复杂度 O(1)。（提醒：R 是行数，C 是列数）也许数据弱的话能 AC（我没试），比赛时间不够也许可以蒙一下，但没有讨论价值。</p>
<p>这道题明显有大量重复子问题，稍有经验都应该马上往动态规划上靠。关于动态规划的基础常识，可以先看之前的文章：《<a href="../leetcode-10-regular-expression-matching/">LeetCode 题解： Regular Expression Matching</a>》，以后考虑围绕基础知识点写一些文章。</p>
<p>想到 DP 容易，难点是定义子问题，状态如何转移。多年前那次和这次，都第一时间知道是 DP 的题，仍然耗费不少时间想具体的状态转移方程。（虽然做过，相似的矩阵题太多，过了一阵才认出来，又花了一点时间回想有哪些方案。）</p>
<h3 id="思考方向"><a href="#思考方向" class="headerlink" title="思考方向"></a>思考方向</h3><p>最明显的重复运算，是对候选矩阵做全 1 判断。能否记录某些中间状态，根据少数点是否为 1， 结合这些中间状态得到下一个状态，避免前面判断过的 位置 再来一遍？</p>
<p>根据以往做 DP 的经验，一般是 <code>dp[r][c]</code> 代表到 r 行 c 列为止的某个结果。例如，我们定义两个矩阵 <code>width[r][c]</code> 和 <code>height[r][c]</code> 代表以 (r, c) 为右下角的矩阵的最大宽度和最大高度，从左上到右下运算。有没有可能从前面的状态，推算出以(r, c) 为右下角的极大矩阵呢？</p>
<p><img src="../../images/leetcode1504/leetcode1504-try-dp.svg" alt=""></p>
<blockquote>
<p>绿色表示已经处理过的点，白色表示待处理的点。下同。</p>
</blockquote>
<p>很难。我们找极大矩阵，是因为知道极大矩阵的大小，就很容易计算它有多少个子矩阵。但极大矩阵可以有很多个，光凭最大宽度和最大高度两个信息，无法计算出这么多个极大矩阵。那还要记录多少信息才够？</p>
<p><img src="../../images/leetcode1504/leetcode1504-extreme-matrix.svg" alt=""></p>
<blockquote>
<p>极大矩阵是指，这个矩阵在边界上碰到了 0，没办法变得更大了。但它不一定是最大的矩阵。</p>
<p>记录最大宽和最大高之所以很难用得上，是因为它们很可能不是在同一个矩阵上记录的，也很难用来计算那么多个极大矩阵。</p>
</blockquote>
<p>换一个角度看为什么这么难。假定可以用 O(1) 完成状态转移，计算出 (r, c) 点为右下角的所有极大矩阵，由于右下角只有 O(RC) 种情况，换言之时间复杂度从 O((RC)^3) 降到了 O(RC)，优化幅度非常大 。但多个极大矩阵真的能用 O(1) 时间就计算出来吗？要借用哪些中间结果？</p>
<p>事实上，这个方向是可行的。但我们先从简单一点的开始。</p>
<h2 id="压缩-DP"><a href="#压缩-DP" class="headerlink" title="压缩 + DP"></a>压缩 + DP</h2><p>二维的情况复杂，是因为长宽有多种组合；如果长宽不能同时达到最大，就会产生大量极大矩阵。</p>
<p>那就 <strong>从一维开始找规律</strong> 。</p>
<h3 id="一维问题：全-1-子段数"><a href="#一维问题：全-1-子段数" class="headerlink" title="一维问题：全 1 子段数"></a>一维问题：全 1 子段数</h3><p><img src="../../images/leetcode1504/leetcode1504-1d-dp.svg" alt=""></p>
<p>一维的情况，问题简化成『统计全 1 子段数』，其中任意长度不为 0 的连续区间 ，都是子段（interval）。假定数组长度为 N，Brute-Force 的做法是，O(N) 选左端点，O(N) 选右端点，O(N) 判断是否全 1，时间复杂度 O(N^3)。</p>
<p>这时用 DP，状态转移方程很好写。假定有一维数组 A，里面同样是 0 或 1。定义 L[i] 为 以第 i 个元素为右边界的子段的最大长度（换言之，连续多少个 1），很容易得到</p>
<p>$$<br>\left{<br>\begin{array}{lr}<br>L<em>i = L</em>{i-1} + 1, &amp; (A_i = 1)\<br>L_i = 0 &amp; (A_i = 0)<br>\end{array}<br>\right.<br>$$</p>
<p>大白话就是，<strong>遇到 1，最大长度加 1；遇到 0，长度清零</strong> 。</p>
<p>再定义 C[i] 为到 第 i 个元素为止，累计的的字段数，状态转移方程为</p>
<p>$$<br>\left{<br>\begin{array}{lr}<br>C<em>i = C</em>{i-1} + L_i, &amp; (A_i = 1)\<br>C<em>i = C</em>{i-1} &amp; (A_i = 0)<br>\end{array}<br>\right.<br>$$</p>
<p>大白话就是，遇到 1，就增加『当前子段最大长度 L[i] 这么多个子段数』；遇到 0，统计数字不变。为什么是 L[i] ？因为 <strong>以 A[i] 为右端点的子段刚好是 L[i] 个，分别为长度为 1、长度为 2、长度为 … 长度为 L[i] </strong> 。</p>
<p>DP 跟 BF 相比，省略了重复运算，但思维不严谨的话，很容易出现重复或者遗漏。我们来确认一下，是否每个左端点和右端点的组合都包含了一次：对于右端点，每个 A[i] = 1 ，都访问且只访问了一次；在确定右端点之后，每个和右端点连续（中间没有 0）的左端点都刚好统计了一次（L[i] 个）。</p>
<p>对于每个元素 A[i]，分别需要常数时间计算 L[i] 和 C[i] ，时间复杂度为 O(N)。由于 L 和 C 都只和当前元素和前一个状态相关，只需保留最后一个状态，没有必要保存数组，空间复杂度为 O(1)。</p>
<p>代码非常简单</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">numInterval</span><span class="params">(A []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	length := <span class="number">0</span></div><div class="line">	count := <span class="number">0</span></div><div class="line">	<span class="keyword">for</span> _, elem := <span class="keyword">range</span> A &#123;</div><div class="line">		<span class="keyword">if</span> elem == <span class="number">1</span> &#123;</div><div class="line">			length++</div><div class="line">			count += length</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			length = <span class="number">0</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="二维问题：压缩成一维"><a href="#二维问题：压缩成一维" class="headerlink" title="二维问题：压缩成一维"></a>二维问题：压缩成一维</h3><p>一维的情况简单，我还是尽量详细地讲，因为这是理解接下来内容的基础。</p>
<p>对于高度为 2 的矩阵，求全 1 子矩阵数。这些子矩阵，高度要么为 1，要么为 2。<strong>对于高度为 1 的子矩阵，情况退回到 一维，分别对每一行应用一维的算法即可</strong> 。而对于高度为 2 的子矩阵，可以『压缩』成高度为 1，再应用一维的算法。</p>
<p><img src="../../images/leetcode1504/leetcode1504-2d-to-1d.svg" alt=""></p>
<p><strong>以此类推，任意高度的子矩阵，也可以压缩成一行处理</strong> 。而且，<strong>R 行压缩成一行，并不需要每次从头开始压缩；只需要在前 R - 1 行的结果上，再合并一行</strong> 。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">numSubmat</span><span class="params">(mat [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	count := <span class="number">0</span></div><div class="line">	rowNum := <span class="built_in">len</span>(mat)</div><div class="line">	colNum := <span class="built_in">len</span>(mat[<span class="number">0</span>])</div><div class="line"></div><div class="line">	<span class="comment">// 压缩的结果只需要保留一行进行运算</span></div><div class="line">	<span class="comment">// 用 bool 值保存节省空间</span></div><div class="line">	mymat := <span class="built_in">make</span>([]<span class="keyword">bool</span>, colNum)</div><div class="line"></div><div class="line">	<span class="comment">// 遍历开始压缩的行数</span></div><div class="line">	<span class="keyword">for</span> rowSt := <span class="number">0</span>; rowSt &lt; rowNum; rowSt++ &#123;</div><div class="line">		<span class="keyword">for</span> col := <span class="number">0</span>; col &lt; colNum; col++ &#123;</div><div class="line">			mymat[col] = <span class="literal">true</span></div><div class="line">		&#125;</div><div class="line">		<span class="comment">// 遍历结束的行数</span></div><div class="line">		<span class="keyword">for</span> rowEd := rowSt; rowEd &lt; rowNum; rowEd++ &#123;</div><div class="line">			length := <span class="number">0</span></div><div class="line">			<span class="keyword">for</span> col := <span class="number">0</span>; col &lt; colNum; col++ &#123;</div><div class="line">				<span class="keyword">if</span> mat[rowEd][col] == <span class="number">0</span> &#123;</div><div class="line">					<span class="comment">// 同一列上任意一行为0，这个位置就断开了</span></div><div class="line">					mymat[col] = <span class="literal">false</span></div><div class="line">				&#125;</div><div class="line">				<span class="comment">// 压缩后，应用一维的算法</span></div><div class="line">				<span class="keyword">if</span> mymat[col] &#123;</div><div class="line">					length++</div><div class="line">					count += length</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					length = <span class="number">0</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>O(R) 遍历开始行，O(R) 遍历结束行，O(C) 的时间压缩每一行并应用一维的算法，时间复杂度为 O(R^2 * C)。只用了一行的额外空间保存压缩行，空间复杂度为 O(C)。由于 R 比 C 遍历多了一层，如果行数比列数大得多，可以将行列交换运算。代码比较麻烦，不再展开。</p>
<p>回到正确性的问题，是否不重不漏？横向在一维时已经讨论过了。纵向，O(R^2) 把所有开始行和结束行的组合都遍历了。换言之，所有的左上角和右下角的组合，都刚好地访问了一遍。</p>
<h2 id="单调栈-DP"><a href="#单调栈-DP" class="headerlink" title="单调栈 + DP"></a>单调栈 + DP</h2><p>上述解法已经相当优秀，将六次方的 BF 解法，降了 3 个阶。（这里为了方便讨论，把 R、C 看做相近的数量级，都当成 N 处理，相当于从 O(N^6) 降到了 O(N^3) 时间复杂度）</p>
<p>当年第一次遇到这道题，我甚至都没能一下子想到这种办法，想通时已经不够时间实现和调试。还是事后同事 Lucy 跟我们讲了思路。之后很长一段时间，没有再细想，把这当成最优解。</p>
<p>直到这次，顺便逛了一下讨论区，居然发现还能 O(RC) ！？</p>
<blockquote>
<p>以下解法并非我的原创，而是看了 LeetCode 美国站讨论区后，根据网友提供的思路，重新实现和用自己的话解释一遍。主要为了分享和加深理解。</p>
<p>平时做的答案，其核心思想，其实也是学来的（主要是大学算法课）。毕竟常见，不需要特别声明。</p>
<p>这次的解法比较绕，不敢掠美，特此声明。</p>
</blockquote>
<h3 id="子问题：分割极大矩阵"><a href="#子问题：分割极大矩阵" class="headerlink" title="子问题：分割极大矩阵"></a>子问题：分割极大矩阵</h3><p>我们回到一开始想到用 动态规划 时提出的问题：『<strong>能不能遍历为 1 的点作为右下角，结合少量中间状态，算出新的中间状态，并逐渐推导出答案？</strong>』</p>
<p>这个问题难在子问题和中间状态的定义。怎么定义，中间状态定义多少个，才能应付最多时跟 R、C 同量级的极大矩阵？</p>
<p>我们把问题简化，先不想怎么判断和划分，假定已经找到了一个 r 行 c 列的极大全 1 矩阵，里面有多少个 <strong>包含右下角的点</strong> 的子矩阵？</p>
<p>答：r x c 个。</p>
<p><img src="../../images/leetcode1504/leetcode1504-submat-with-same-right-bottom-point.svg" alt=""></p>
<p>包含右下角（最后一行结束），子矩阵高度（开始行）有 r 种可能；包含右下角（最后一列结束），矩阵宽度（开始列）有 c 种可能。组成起来有 r x c 种 子矩阵。换言之，<strong>只要找到以当前点为右下角的极大子矩阵，就能直接算出以此为右下角的全部子矩阵数量</strong> 。</p>
<p><img src="../../images/leetcode1504/leetcode1504-extreme-matrix-2.svg" alt=""></p>
<p>难点在于极大子矩阵根本不止一个，叠在一起可能是锯齿状的，也可能是驼峰状的，极难记录和统计。不过只要用递归分治的思想划分一下子问题，难点就变简单了。</p>
<p><img src="../../images/leetcode1504/leetcode1504-extreme-matrix-3.svg" alt=""></p>
<p>我们定义 C[i][j] 为 『以点 (i, j) 为右下角的子矩阵数量』。mat[i][j] 为 0 时，这个点不能构成任何子矩阵，所以只讨论为 1 的情况。如图所示，以第一个白色点 (4, 5) 为右下角的极大子矩阵，一共有 3 种宽高组合（1x6, 2x4, 4x2），它们重叠在一起，构成了一个不规则的形状。将其纵向划分成 3 个互不重叠的 3 个矩阵 X, Y, Z。（不一定是 3 个，实际可能更多，最多时可以分成每列一个）</p>
<p>那么 C[4][5] 就等于 X （包含右下角）的子矩阵数（4x2），加上 C[4][3]。之所以这样算，是因为所有以 (4, 3) 为右下角的子矩阵，都可以列数加 2 ，变成以 (4, 5) 为右下角。通过这样划分子问题，<strong>无论有多少个极大子矩阵，我们只需要计算包含当前右下角最右（同时也是最高）的一个极大子矩阵，再引用之前的子问题即可</strong> 。</p>
<p>为什么最右的极大子矩阵一定是最高的呢？因为子矩阵的高度无法超过右下角所在列的高度。上图中 列4 的高度为 5 （蓝色的(0, 4)点），但是这个点无法跟右下角构成矩阵。</p>
<h3 id="引入-高度记录-和-高度栈"><a href="#引入-高度记录-和-高度栈" class="headerlink" title="引入 高度记录 和 高度栈"></a>引入 高度记录 和 高度栈</h3><p>不过问题还没解决：</p>
<ul>
<li>如何知道最右的极大子矩阵的宽高？（4 和 2 怎么得到）</li>
<li>如何知道上一个子问题是哪个？（怎么得知要引用 (4, 3) 的子问题） </li>
</ul>
<p>后面这个问题好回答，要引用的子问题，就是当前子问题减掉当前极大子矩阵宽度（2）的子问题。问题变成了：<strong>当前极大子矩阵的宽高如何获取</strong> 。</p>
<p>为此，引入两个记录：</p>
<ul>
<li>高度记录 h[i][j] ，记录每列到当前点的最大高度（连续 1 的个数）。</li>
<li>每行的高度栈，记录单调递增的高度序列。</li>
</ul>
<p>先说高度记录，计算方法跟上一个解法的最大长度一样，只是变成纵向。有了它，极大子矩阵的宽高都能获得：高，就是当前列的高度（例子中为 4）；宽则稍复杂一点，需要找到左边第一个比当前列低的列（例子中为 列 3），两列之间宽度就是极大子矩阵的宽度（5 - 3 = 2）。</p>
<p>如果不考虑时间复杂度，高度记录就足以解决问题。但是每次都要搜索左边的高度记录，导致每行的复杂度为 O(C^2) ，乘以行数后整体为 O(R*C^2)，则跟第一种解法相比并无改进。所以引入高度栈，维护一个严格单调递增的高度序列。每当拿到新一列的高度，先将栈里大于等于当前列的高度出栈，剩下的栈顶的列，就是左边第一个比当前列低的列。完成之后将当前列进栈，继续下一步。</p>
<blockquote>
<p>实际实践中，栈里一般储存列号，方便计算宽度，高度根据列号到 高度数组查询。</p>
</blockquote>
<p><img src="../../images/leetcode1504/leetcode1504-height-stack.svg" alt=""></p>
<p>由于高度一旦下降，之前更高的列就无法与后续的点构成矩阵，所以出栈的高度再也不会用到。每个列都只会进栈一次，也（最多）只会出栈一次，遍历一行的时间复杂度就降低到了 O(C)。</p>
<p>如果这部分感觉有点迷糊，跟其它难点混在一起难以理解，可以先尝试做 LeetCode 84 ，在一维的情况下，把高度栈搞懂。</p>
<p>上代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">numSubmat</span><span class="params">(mat [][]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</div><div class="line">	count := <span class="number">0</span></div><div class="line">	rowNum := <span class="built_in">len</span>(mat)</div><div class="line">	colNum := <span class="built_in">len</span>(mat[<span class="number">0</span>])</div><div class="line"></div><div class="line">	<span class="comment">// 高度记录只用到最后一行，保留一行即可</span></div><div class="line">	heights := <span class="built_in">make</span>([]<span class="keyword">int</span>, colNum)</div><div class="line">	<span class="comment">// DP 解，以当前点为右下角的子矩阵数，同样只用到最后一行，只保留一行</span></div><div class="line">	dpCount := <span class="built_in">make</span>([]<span class="keyword">int</span>, colNum)</div><div class="line">	<span class="comment">// 高度栈，注意保存的是列号，列高还得到 heights 取</span></div><div class="line">	hStack := newStack()</div><div class="line">	<span class="comment">// 行循环</span></div><div class="line">	<span class="keyword">for</span> row := <span class="number">0</span>; row &lt; rowNum; row++ &#123;</div><div class="line">		<span class="comment">// 只有一个高度栈循环利用，每行开始前摇清空</span></div><div class="line">		hStack.clear()</div><div class="line"></div><div class="line">		<span class="comment">// 列循环</span></div><div class="line">		<span class="keyword">for</span> col := <span class="number">0</span>; col &lt; colNum; col++ &#123;</div><div class="line">			<span class="comment">// 计算当前列高度</span></div><div class="line">			<span class="keyword">if</span> mat[row][col] == <span class="number">1</span> &#123;</div><div class="line">				heights[col]++</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				heights[col] = <span class="number">0</span></div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="comment">// 将栈里高度 大于等于当前列 的列出栈</span></div><div class="line">			<span class="keyword">for</span> hStack.size() &gt; <span class="number">0</span> &amp;&amp; heights[hStack.top()] &gt;= heights[col] &#123;</div><div class="line">				hStack.pop()</div><div class="line">			&#125;</div><div class="line"></div><div class="line"></div><div class="line">			<span class="keyword">if</span> hStack.size() == <span class="number">0</span> &#123;</div><div class="line">				<span class="comment">// 一直到最左，没有列比当前列 低，宽度直接为 列号 + 1 （列号从 0 开始）</span></div><div class="line">				dpCount[col] = heights[col] * (col + <span class="number">1</span>)</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="comment">// 找到左边第一个比当前列低的列，宽度为列号的差，并加上该列的子矩阵数</span></div><div class="line">				preCol := hStack.top()</div><div class="line">				dpCount[col] = dpCount[preCol] + heights[col]*(col-preCol)</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="comment">// 当前列进栈</span></div><div class="line">			hStack.push(col)</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 结束本行前，将本行结果累计，下一循环就会被覆盖</span></div><div class="line">		<span class="keyword">for</span> col := <span class="number">0</span>; col &lt; colNum; col++ &#123;</div><div class="line">			count += dpCount[col]</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> count</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 基于切片自行实现了一个简单的栈</span></div><div class="line"><span class="keyword">type</span> stack <span class="keyword">struct</span> &#123;</div><div class="line">	data []<span class="keyword">int</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStack</span><span class="params">()</span> *<span class="title">stack</span></span>      &#123; <span class="keyword">return</span> &amp;stack&#123;data: <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)&#125; &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stack)</span> <span class="title">size</span><span class="params">()</span> <span class="title">int</span></span>  &#123; <span class="keyword">return</span> <span class="built_in">len</span>(s.data) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stack)</span> <span class="title">push</span><span class="params">(v <span class="keyword">int</span>)</span></span> &#123; s.data = <span class="built_in">append</span>(s.data, v) &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stack)</span> <span class="title">top</span><span class="params">()</span> <span class="title">int</span></span>   &#123; <span class="keyword">return</span> s.data[<span class="built_in">len</span>(s.data)<span class="number">-1</span>] &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stack)</span> <span class="title">pop</span><span class="params">()</span></span>       &#123; s.data = s.data[:<span class="built_in">len</span>(s.data)<span class="number">-1</span>] &#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *stack)</span> <span class="title">clear</span><span class="params">()</span></span>     &#123; s.data = s.data[:<span class="number">0</span>] &#125;</div></pre></td></tr></table></figure>
<p>正确性</p>
<ul>
<li>不重：右下角不同的子矩阵肯定不是同一个子矩阵。</li>
<li>不漏：每一个点都作为右下角遍历了一次，每次把以该点为右下角的子矩阵都计算在内。</li>
</ul>
<p>复杂度</p>
<ul>
<li><p>时间复杂度：最外层每行遍历一次，内层同时做两件事：</p>
<ul>
<li>每个点作为右下角计算一次，计算过程为常数；</li>
<li><p>每个列下标都进栈一次，最多出栈一次。（如果一直单调递增就不出栈）；</p>
<p>整体的复杂度为 O(RC)。</p>
</li>
</ul>
</li>
<li><p>空间复杂度：常数组辅助变量，每组变量大小为 C；单调栈也最多进栈 C 个列下标，复杂度为 O(C)。</p>
</li>
</ul>
<hr>
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议"><br>本文为本人原创，采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议</a>进行许可。<br>本作品可自由复制、传播及基于本作品进行演绎创作。如有以上需要，请留言告知，在文章开头明显位置加上署名（Jayce Chant）、原链接及许可协议信息，并明确指出修改（如有），不得用于商业用途。谢谢合作。<br>请点击查看<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="external">协议</a>的中文摘要。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://jaycechant.info/2020/leetcode-1504-count-submatrices/" data-id="ckor1vxxp003a9kxlutciyvqh" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="https://jaycechant.info/2020/leetcode-1504-count-submatrices/#disqus_thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动态规划/">动态规划</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/golang-in-action-day-1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          Go 语言实战（1）： 初识
        
      </div>
    </a>
  
  
    <a href="/2020/about-child-restraint-system/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">聊聊儿童安全座椅</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go-语言实战/">Go 语言实战</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/刷题/">刷题</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/科普/">科普</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/粤语/">粤语</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 13.33px;">Algorithm</a> <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Android/" style="font-size: 11.67px;">Android</a> <a href="/tags/Android-sdk/" style="font-size: 10px;">Android-sdk</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/JCE/" style="font-size: 10px;">JCE</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/JavaMail/" style="font-size: 10px;">JavaMail</a> <a href="/tags/Jenkins/" style="font-size: 16.67px;">Jenkins</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 13.33px;">Markdown</a> <a href="/tags/Mathjax/" style="font-size: 10px;">Mathjax</a> <a href="/tags/OJ/" style="font-size: 10px;">OJ</a> <a href="/tags/Octopress/" style="font-size: 10px;">Octopress</a> <a href="/tags/OpenGrok/" style="font-size: 10px;">OpenGrok</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Syncthing/" style="font-size: 10px;">Syncthing</a> <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 11.67px;">Ubuntu</a> <a href="/tags/algorithm/" style="font-size: 11.67px;">algorithm</a> <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/blog/" style="font-size: 13.33px;">blog</a> <a href="/tags/byobu/" style="font-size: 11.67px;">byobu</a> <a href="/tags/ctags/" style="font-size: 10px;">ctags</a> <a href="/tags/dep/" style="font-size: 11.67px;">dep</a> <a href="/tags/document/" style="font-size: 10px;">document</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/file-system/" style="font-size: 10px;">file-system</a> <a href="/tags/flutter/" style="font-size: 10px;">flutter</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/glide/" style="font-size: 10px;">glide</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/how-to/" style="font-size: 16.67px;">how-to</a> <a href="/tags/jpg/" style="font-size: 10px;">jpg</a> <a href="/tags/json/" style="font-size: 11.67px;">json</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/node-js/" style="font-size: 11.67px;">node.js</a> <a href="/tags/nodePPT/" style="font-size: 11.67px;">nodePPT</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pgyer/" style="font-size: 10px;">pgyer</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/png/" style="font-size: 10px;">png</a> <a href="/tags/practice/" style="font-size: 11.67px;">practice</a> <a href="/tags/presentation/" style="font-size: 11.67px;">presentation</a> <a href="/tags/review/" style="font-size: 10px;">review</a> <a href="/tags/screen/" style="font-size: 11.67px;">screen</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/skill/" style="font-size: 13.33px;">skill</a> <a href="/tags/smtp/" style="font-size: 10px;">smtp</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/solution-report/" style="font-size: 10px;">solution-report</a> <a href="/tags/supervisor/" style="font-size: 10px;">supervisor</a> <a href="/tags/thought/" style="font-size: 10px;">thought</a> <a href="/tags/trouble/" style="font-size: 18.33px;">trouble</a> <a href="/tags/unfinished/" style="font-size: 13.33px;">unfinished</a> <a href="/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/tags/vsftp/" style="font-size: 10px;">vsftp</a> <a href="/tags/why/" style="font-size: 11.67px;">why</a> <a href="/tags/写作/" style="font-size: 13.33px;">写作</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/翻译/" style="font-size: 13.33px;">翻译</a> <a href="/tags/语言表达/" style="font-size: 10px;">语言表达</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">四月 2012</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/pineapple-with-caramel-flavor/">18 公斤菠萝怎么吃？来个焦糖风味吧</a>
          </li>
        
          <li>
            <a href="/2021/golang-format-verbs/">Go 语言格式化动词</a>
          </li>
        
          <li>
            <a href="/2021/time-is-up/">现在写，可能都来不及了...</a>
          </li>
        
          <li>
            <a href="/2020/golang-in-action-day-8/">Go 语言实战（8）：命令行（3）CLI 框架</a>
          </li>
        
          <li>
            <a href="/2020/suisuikang/">关于保险的两个追加话题之一：穗岁康</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://hexo.io/zh-cn/" target="_blank">Hexo主页</a>
          </li>
        
          <li>
            <a href="https://hexo.io/zh-cn/docs/" target="_blank">Hexo文档</a>
          </li>
        
          <li>
            <a href="https://github.com/xiangming/landscape-plus" target="_blank">landscape-plus项目主页</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Jayce Sigit Chant<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/list" class="mobile-nav-link">List</a>
  
    <a href="https://github.com/JayceChant" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">Sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<script>
  var disqus_shortname = 'jaycetb';
  
  var disqus_url = 'https://jaycechant.info/2020/leetcode-1504-count-submatrices/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>



<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
