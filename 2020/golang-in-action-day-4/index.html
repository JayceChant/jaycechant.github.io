
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Go 语言实战（4）：运算符 | 存档Save&amp;Load</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="接下来的两期分别介绍 运算符 和 控制结构，然后准备引入实战项目。">
<meta property="og:type" content="article">
<meta property="og:title" content="Go 语言实战（4）：运算符">
<meta property="og:url" content="https://jaycechant.info/2020/golang-in-action-day-4/index.html">
<meta property="og:site_name" content="存档Save&Load">
<meta property="og:description" content="接下来的两期分别介绍 运算符 和 控制结构，然后准备引入实战项目。">
<meta property="og:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
<meta property="og:updated_time" content="2020-10-17T07:49:35.465Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Go 语言实战（4）：运算符">
<meta name="twitter:description" content="接下来的两期分别介绍 运算符 和 控制结构，然后准备引入实战项目。">
<meta name="twitter:image" content="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">
  
    <link rel="alternative" href="/atom.xml" title="存档Save&amp;Load" type="application/atom+xml">
  
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">存档Save&amp;Load</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">存档意味着放下包袱，搞砸了不过回来读档</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/list">List</a>
        
          <a class="main-nav-link" href="https://github.com/JayceChant">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/sitemap.xml">Sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
      </nav>
      
      <div id="search-form-wrap">
        <form action="" accept-charset="utf-8" class="search-form">
          <input id="searchtext" type="search" name="q" maxlength="20" class="search-form-input" placeholder="Search" onkeypress="if(event.keyCode==13){document.getElementById('searchsub').click();return false;}">
          <input id="searchsub" type="submit" value="" class="search-form-submit" onclick="window.open('https://global.bing.com/search?&amp;q=site:jaycechant.info '+document.getElementById('searchtext').value, '_blank')">
        </form>
      </div>
      
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-golang-in-action-day-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/golang-in-action-day-4/" class="article-date">
  <time datetime="2020-10-08T09:32:18.000Z" itemprop="datePublished">2020-10-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Go-语言实战/">Go 语言实战</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Go 语言实战（4）：运算符
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>接下来的两期分别介绍 运算符 和 控制结构，然后准备引入实战项目。</p>
<a id="more"></a>
<h2 id="运算符（operator）"><a href="#运算符（operator）" class="headerlink" title="运算符（operator）"></a>运算符（operator）</h2><p>运算符将操作数（operands）连接成表达式（expression）。然后表达式根据（运算符的）规则求值。</p>
<blockquote>
<p>注意，Go 是区分 <strong>表达式</strong>（expression，整体可求值）和 <strong>语句</strong>（statement，不可求值）的语言。</p>
<p>既然运算符连接操作数会得到表达式，然后表达式一定可以求值（注意操作数可能是一个值，也可能是另一个表达式，或者返回值，总之可以求值）；那么反过来说，不能求值的就不是表达式，对应的符号也不是（Go 定义的）运算符。</p>
<p>在这里，作为对比会提及一些容易被当成表达式的语句（官方文档称之为 operators form statements，运算符形式的语句），但不展开讲语句。</p>
</blockquote>
<p>Go 是强类型语言，意味着双目运算符的两个操作数类型要一致（移位运算除外）。对于不一致的情况，要么是 <code>untyped</code> 自动转换，要么是显式转换，相应的规则请参考前面两期的内容。</p>
<h3 id="1-算术（arithmetic）运算符"><a href="#1-算术（arithmetic）运算符" class="headerlink" title="1. 算术（arithmetic）运算符"></a>1. 算术（arithmetic）运算符</h3><p>算术运算符对数字类型（numeric）的值进行运算，并得到与第一个操作数相同类型的值。</p>
<p>在 Go 里，四则运算 和 位运算 都被认为是算术运算。</p>
<p>算术运算符都是 <strong>双目运算符</strong>（意味着需要两个操作数）；三个特殊情况是用作正负号的 <code>+</code> 、<code>-</code> 和用作按位取反的 <code>^</code> ，这时它们是单目运算符。</p>
<h4 id="1-1-四则运算"><a href="#1-1-四则运算" class="headerlink" title="1.1 四则运算"></a>1.1 四则运算</h4><p>四则运算包括我们熟知的 <code>+</code>, <code>-</code>, <code>*</code>,<code>/</code> （加减乘除），以及除法衍生的运算 <code>%</code> （求余）。</p>
<p><code>+</code>, <code>-</code>, <code>*</code>,<code>/</code> 的操作数可以是 <strong>任意数字类型</strong>（包括整型数、浮点数 和 复数）；<code>%</code> 则只能是整型参与运算。</p>
<p>加减乘除的含义和规则想必不用介绍，只提一下几个特殊情况：</p>
<ul>
<li><p>我们都知道，除数不能为 0。如果整数除法里除数为 常量 0，直接编译错误；如果是 变量 0，则会引起一个运行时 panic。如果是浮点数除法，IEEE-754 没有规定，结果视具体实现而定，目前 Go 的实现是得到一个特殊浮点数『无穷』（视乎被除数的符号，得到 <code>+Inf</code> 或 <code>-Inf</code>）。</p>
</li>
<li><p>因为结果的类型与操作数一致，整数除法的结果也是整数，那就可能出现『除不尽』，这时尾数向零的方向截断（truncate）。例如 <code>7 / 4</code> 结果为 <code>1</code> （尾数 <code>0.75</code> 被截断，尽管 <code>1.75</code> 更接近 <code>2</code>），<code>-7 / 3</code> 结果为 <code>-2</code> （商 <code>-2</code> 余 <code>-1</code> 比 商 <code>-3</code> 余 <code>2</code> ，商更靠近 0）。</p>
</li>
<li><p>对于求余，假设 <code>x / y</code> ，商为 <code>q</code> 余数为 <code>r</code> ， 它们之间的关系满足 <code>x = q*y + r</code> 且 <code>|r| &lt; |y|</code> （余数的绝对值一定小于除数的绝对值，注意是除数不是商）。我们根据上一条规则求得整数除法的商之后，就可以根据这条规则得到余数了：</p>
<p>  | x    | y    | x / y | x % y |<br>  | —- | —- | —– | —– |<br>  | 5    | 3    | 1     | 2     |<br>  | -5   | 3    | -1    | -2    |<br>  | 5    | -3   | -1    | 2     |<br>  | -5   | -3   | 1     | -2    |</p>
</li>
</ul>
<ul>
<li><p><code>+</code> 和 <code>-</code> 作为单目运算符时，放在值的前面表示指定数值的符号，也就是作为正负号使用，相当于省略掉作为双目运算符时前面的 <code>0</code> ：<code>-5</code> 等价于 <code>0 - 5</code>。 （实践中 <code>+5</code> 跟 <code>5</code> 没有任何区别，所以很少会用到单目的 <code>+</code>）</p>
</li>
<li><p><code>+</code> 加号和 <code>+=</code> 也可以应用在字符串上，严格来说这不是加法，而是连接（concat）；当然你也可以理解为特殊的『字符串加法』。</p>
</li>
</ul>
<p>除此以外，还要留意类型的范围和精度，看运算结果是否有超出类型的表示范围。溢出的处理可以参考数字类型的类型转换部分。</p>
<h4 id="1-2-位运算"><a href="#1-2-位运算" class="headerlink" title="1.2 位运算"></a>1.2 位运算</h4><p>位运算只能应用于 <strong>整型数</strong> 。进一步细分，位运算又可以分为 按位逻辑运算 和 移位运算。</p>
<p>由于位运算是直接对二进制位进行运算，所以我们要了解整型数的二进制表示：</p>
<ul>
<li><p>正数 还有 零 比较好办，只要知道如何表示二进制数，做一个进制转换即可，例如 <code>21</code> 二进制位为 <code>00010101</code> （为了方便举例，用最短的 <code>int8</code>，下同）。</p>
</li>
<li><p>负数要麻烦一些，并不是直接在正数的基础上把符号位置为 1，因为这样正负数的加法很难实现。计算机使用二进制补码（简称补码）来表示负数。</p>
<p>  这里不展开补码的原理，只要记住一个口诀『取反加一』，就可以从正数得到对应的负数的补码。例如 <code>21</code> 的二进制取反是 <code>11101010</code> ，加一得到 <code>11101011</code> ，就是 <code>-21</code> 的补码；<code>-2</code> 的补码是 <code>11111110</code> （注意加一时产生了进位）。这两个数的补码，直接跟对应的正数相加，结果均为 0 （丢弃最高位的溢出）；跟别的数相加也能直接得到正确的结果。</p>
</li>
</ul>
<h5 id="按位（bitwise）逻辑运算"><a href="#按位（bitwise）逻辑运算" class="headerlink" title="按位（bitwise）逻辑运算"></a>按位（bitwise）逻辑运算</h5><p>按位逻辑运算的基本规则跟逻辑运算一致。只是逻辑运算对布尔值进行运算，而按位运算对二进制位逐位进行运算。</p>
<table>
<thead>
<tr>
<th>op （运算符）</th>
<th>11110000 op 01010101</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>01010000</td>
<td>AND 按位与，两边均为 1 时结果为 1，否则为 0。</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>11110101</td>
<td>OR 按位或，两边至少一个为 1 时结果为 1，均为 0 时才为 0。</td>
</tr>
<tr>
<td>^（双目）</td>
<td>10100101</td>
<td>XOR 异或，不同的位结果为 1 ，相同的位为 0。</td>
</tr>
<tr>
<td>^（单目）</td>
<td>-</td>
<td>NOT 非，或者叫按位取反，<code>^01010101</code> 结果为 <code>10101010</code> ，相当于省略双目运算的左操作数 <code>11111111</code> （对应位宽全 1，相当于无符号数的最大值，和有符号数的 <code>-1</code>）。</td>
</tr>
<tr>
<td>&amp;^</td>
<td>10100000</td>
<td>bit clear（AND NOT） 位清除，注意不是与非（与非是 NAND）。只有左操作数为 1 且右操作数为 0 时结果为 1，否则均为 0。可以看作将右操作数中的 1 从左操作数中清除掉。</td>
</tr>
</tbody>
</table>
<p>其它更复杂的逻辑运算，可以通过组合基本的逻辑运算构成。例如，<strong>同或</strong> （XNOR）可以在 <strong>异或</strong> 的基础上 <strong>取反</strong>  <code>^(a ^ b)</code>；<strong>与非</strong> （NAND）可以在 <strong>与</strong> 的基础上 <strong>取反</strong>  <code>^(a &amp; b)</code> 。</p>
<p>相信你会发现，位清除（bit clear，AND NOT）其实也是 <strong>与</strong> 和 <strong>取反</strong> 的组合，<code>a &amp;^ b</code> 等价于 <code>a &amp; (^b)</code> ，那为什么需要组合成一个独立的运算符呢？看下面的代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> a = ^<span class="number">1</span> <span class="comment">// untyped int, -2（补码）</span></div><div class="line"><span class="keyword">const</span> b <span class="keyword">uint64</span> = ^<span class="number">1</span> <span class="comment">// ！如果不想得到负数，指定类型为无符号数，得到溢出错误</span></div><div class="line"><span class="keyword">var</span> c <span class="keyword">uint64</span> = ^<span class="number">1</span> <span class="comment">// ！同样的错误，问题出在常量（字面量）在转换类型时，不能改变值</span></div><div class="line"></div><div class="line"><span class="comment">// 正确的做法是先指定了类型再取反</span></div><div class="line"><span class="keyword">const</span> d <span class="keyword">uint64</span> = <span class="number">1</span> <span class="comment">// 关键是先指定类型，避免转换</span></div><div class="line"><span class="keyword">const</span> e = ^d <span class="comment">// 正常</span></div><div class="line"><span class="keyword">var</span> f = ^<span class="keyword">uint64</span>(<span class="number">1</span>) <span class="comment">// 也可以</span></div><div class="line"></div><div class="line"><span class="comment">// 同样道理，在清除指定位时</span></div><div class="line"><span class="keyword">var</span> x <span class="keyword">uint64</span> = <span class="number">2</span></div><div class="line"><span class="keyword">var</span> y = x &amp; (^<span class="number">1</span>) <span class="comment">// ！`^1` 试图转换为 uint64 参与运算时报错。</span></div><div class="line"><span class="comment">// 只能先指定为无符号整型吗？</span></div><div class="line"><span class="keyword">var</span> z = x &amp;^ <span class="number">1</span> <span class="comment">// 正常</span></div></pre></td></tr></table></figure>
<p>可以看到，独立的 <code>&amp;^</code> 运算符，跟两个运算符组合使用相比，规避掉了溢出错误，省略了将字面量先指定类型，还是有差别的。需要注意的是，并没有 <code>|^</code> 运算符。</p>
<h5 id="移位（shift）运算"><a href="#移位（shift）运算" class="headerlink" title="移位（shift）运算"></a>移位（shift）运算</h5><p>分为左移位 <code>&lt;&lt;</code> 和右移位 <code>&gt;&gt;</code> ，就是把左操作数的二进制位（连符号位一起），向对应方向，移动右操作数指定的位数。</p>
<p>移位时，超出范围的位丢弃，空缺的位左移补零、右移补符号位（无符号数还是补零）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int8:</div><div class="line"></div><div class="line">   7(00000111) &gt;&gt; 2</div><div class="line">   1(00000001)     // 右移超出范围的两个 1 丢弃，左边补 0（符号位为 0）</div><div class="line"></div><div class="line">   7(00000111) &lt;&lt; 5</div><div class="line"> -32(11100000)     // （低位数起）第三位的 1 一直左移，直到符号位，变成了负数，右边补 0</div><div class="line"></div><div class="line">-128(10000000) &gt;&gt; 5</div><div class="line">  -4(11111100)     // 右移过程中左边补 1 （符号位为 1）</div></pre></td></tr></table></figure>
<p>移位运算是少有的允许左右操作数不同类型的运算。两个操作数都可以是任意整型，但右操作数的值不能为负数（只能为 0 或 正数）：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">2</span></div><div class="line">y = <span class="number">1</span> &lt;&lt; a <span class="comment">// a 虽然是有符号数，但值为正数</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> b = <span class="number">-2</span></div><div class="line">y = <span class="number">1</span> &lt;&lt; b <span class="comment">// ！编译错误：negative shift count</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> c = <span class="number">-3</span></div><div class="line">y = <span class="number">1</span> &gt;&gt; c <span class="comment">// ！运行时错误：negative shift amount</span></div></pre></td></tr></table></figure>
<p>不过移位运算也可能涉及类型转换：如果移位表达式不是一个常量表达式（换言之，不可以编译期求值），而且左操作数是无类型常量（untyped const），左操作数会隐式转换为 <strong>移位表达式替换为左操作数时它要转换的类型</strong> 。</p>
<p>这句话非常拗口，需要举个例子。 <code>var y int8 = 1 &lt;&lt; x</code> 这个例子里面，如果 <code>x</code> 是常量，那么 <code>1 &lt;&lt; x</code> 就会在编译时求值，<code>1</code> 是 <code>untyped const</code>，结果的类型跟它一样，然后结果会试图转换为 <code>int8</code> 类型；如果 <code>x</code> 不是常量，<code>1</code> 需要先转换为 <code>int8</code> 再参与移位运算。之所以是 <code>int8</code> ，是因为把表达式替换为左操作数的话（ <code>var y int8 = 1</code> ），左操作数需要转换为 <code>int8</code> 。</p>
<p>换言之，运行时的移位操作，如果不知道左操作数应该转换为什么类型参与运算（这关系到溢出判断），可以先把移位拿掉，判断完类型再加回来。</p>
<h4 id="1-3-容易当成算术运算的语句"><a href="#1-3-容易当成算术运算的语句" class="headerlink" title="1.3 容易当成算术运算的语句"></a>1.3 容易当成算术运算的语句</h4><ul>
<li><p>赋值语句</p>
<p>  Go 里面，赋值语句是没有值的。所以 <code>a + b</code> 是一个加法表达式，可以求值，可以放在赋值符号 <code>=</code> 或者 <code>:=</code> 的右边；但 <code>c = a + b</code> 整体却是一个赋值语句，不能求值。</p>
<p>  与其它 C 家族语言类似，Go 提供了算术运算后赋值的语法糖 <code>a op= b</code> ，它等价于 <code>a = a op b</code> ，其中 <code>op</code> 可以为任意一个双目算术运算符（<code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>&amp;=</code>, <code>|=</code>, <code>^=</code>, <code>&amp;^=</code>, <code>&lt;&lt;=</code>, <code>&gt;&gt;=</code>）。有些教程把这种组合称作 『赋值运算符』，<strong>这种说法不严谨</strong>，因为这些语句整体不能求值，并不是表达式。不能把它们加入别的运算（如 <code>c + (a += b)</code>），也不能作为右值赋值（如 <code>c = (a -= b)</code>）。带 <code>=</code> 的这一系列符号不算（狭义的）运算符。</p>
</li>
<li><p>自增自减语句</p>
<p>  在 C 语言里面，<code>++</code> 和 <code>--</code> 确实是运算符，自增自减是表达式且可以求值。甚至还弄出了运算符在前和在后两种用法，分别用来表达先运算后求值和先求值后运算。</p>
<p>  Go 大概是觉得这些用法非常不直观容易出错，取消了自增自减的求值。所以在 Go 里面，它们是语句，只有写在变量后面一种用法，得单独一行先执行完，再访问变量取值。<code>b = a++</code> 这样的写法是错的，<code>a++</code> 把 <code>a</code> 的值加了 1，但 <code>a++</code> 语句本身并没有值。</p>
</li>
</ul>
<h3 id="2-比较（comparison）运算符"><a href="#2-比较（comparison）运算符" class="headerlink" title="2 比较（comparison）运算符"></a>2 比较（comparison）运算符</h3><p>比较运算又叫关系运算，应用范围比算术运算广，不在局限于数字类型。比较运算要求两个操作数的类型可以 <strong>互相赋值</strong>，以及满足两个条件：可比较（comparable） 和 有序（ordered）。其中可比较不一定有序，但有序一定是可比较的。</p>
<p>比较运算的结果是布尔值。</p>
<h4 id="可比较（comparable）"><a href="#可比较（comparable）" class="headerlink" title="可比较（comparable）"></a>可比较（comparable）</h4><p>相等运算符 <code>==</code> （相等）和 <code>!=</code> （不相等）要求操作数是可比较的。不同类型的规定如下：</p>
<ul>
<li><p>布尔（<code>bool</code>）值可比较。布尔类型只有 <code>true</code> 和 <code>false</code> 两个值，要么相同，要么不同。</p>
</li>
<li><p>数字类型都是可比较的。</p>
<ul>
<li>整型数很好理解，相等需要值完全一致。</li>
<li>浮点数涉及精度问题，详细规定需要参考 IEEE-754 规范。总的来说，因为涉及精度损失，浮点数直接比较的结果可能会出现不符合预期的情况：对于精度要求比较低的比较，可以将差值小于精度视作相等；如果精度要求超出可以表示的范围，只能考虑使用其它实现，例如 <code>math/big</code> 包。</li>
<li>复数的相等，就是实部和虚部的浮点数分别相等。</li>
</ul>
</li>
<li><p>字符串（<code>string</code>）可比较。就是逐个字节比较。</p>
</li>
<li><p>指针可比较。两个指针指向同一个变量，或者都是 <code>nil</code> 被认为相等。</p>
</li>
<li><p>通道（<code>chan</code>）可比较。两个通道变量指向同一个通道（来自同一个 <code>make</code> 调用创建），或者都是 <code>nil</code> 被认为相等。</p>
</li>
<li><p>接口（<code>interface</code>）可比较。两个接口变量拥有相同的动态类型、而且值也是相等（具体怎么比较根据动态类型决定），又或者都是 <code>nil</code> ，被认为相等。</p>
<p>  如果动态类型不同，不相等，不会报错。如果动态类型相同，但是该类型不可比较，会产生一个运行时 panic。（对不可比较的静态类型进行比较，编译时就不会通过；但是接口的实际类型需要运行时确定，所以变成了 panic 报错。）</p>
</li>
<li><p>非接口类型 <code>X</code> 的变量 <code>x</code> 与 接口类型 <code>T</code> 的变量 <code>t</code> ，满足以下条件时可比较：<code>X</code> 类型可比较，且，<code>X</code> 类型满足 <code>T</code> 接口。</p>
<p>  而 <code>x</code> 与 <code>t</code> 相等需要满足：<code>t</code> 的动态类型是 <code>X</code>，且，<code>t</code> 的值与 <code>x</code> 相等（按 <code>X</code> 类型的比较规则）。</p>
</li>
<li><p>数组类型可比较需要满足：两个数组是相同类型（同样的长度和元素类型， <code>[10]int</code> 和 <code>[10]bool</code> 是不同类型，<code>[10]int</code> 和 <code>[9]int</code> 也是不同类型），且，元素类型可比较。</p>
<p>  两个数组相等则需要满足对应的元素都相等。</p>
</li>
<li><p>结构体与数组类似，可比较需要满足：相同类型，且，所有成员字段的类型可比较。</p>
<p>  两个结构体相等需要所有成员字段都相等。</p>
</li>
</ul>
<p>注意以上规则不仅在直接比较时有效，还有这些类型作为数组或者结构体成员，被递归自动比较时也有效。</p>
<p>切片（slice）、映射（<code>map</code>）和函数（<code>func</code>）不可比较。但是可以跟 <code>nil</code> 进行比较判断是否非空。</p>
<p>顺便提一下，映射的键值类型必须是可比较类型，这在以后介绍的时候会提到，这里先做个一个知识关联。</p>
<h4 id="有序（ordered）"><a href="#有序（ordered）" class="headerlink" title="有序（ordered）"></a>有序（ordered）</h4><p>顺序（ordering）运算符 <code>&lt;</code> 小于，<code>&lt;=</code> 小于等于，<code>&gt;</code> 大于，<code>&gt;=</code> 大于等于 则要求操作数的类型是有序的。</p>
<p>有序的类型就非常少了，只有 整型、浮点型 和 字符串 三类。</p>
<p>这个比较好理解。数字直接比大小，浮点数涉及精度仍然参考 IEEE-754。字符串仍然是逐个字节比较，前缀相等时，较短的字符串较小（也就是空串最小，较短的字符串相当于同一个前缀后面接了一个空串）。</p>
<p>由于 Go 不支持运算符重载，所以除了这几个类型以外的类型都不支持顺序运算符，也没办法使它们支持。特殊的比较，就需要引入一些工具包（如 <code>reflect.Equal</code> 函数），自定义类型则需要自己实现比较方法如 <code>(a T) compareTo (b T)</code> 。另外，如想利用 <code>sort</code> 包进行排序，类型就需要满足 <code>sort.Interface</code> 接口。</p>
<h3 id="3-逻辑运算符"><a href="#3-逻辑运算符" class="headerlink" title="3 逻辑运算符"></a>3 逻辑运算符</h3><p>逻辑运算符对布尔（<code>bool</code>）值进行运算，并得到一个布尔值。</p>
<p>逻辑运算符只有三个：</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;&amp;</td>
<td>短路逻辑与，操作数均为 <code>true</code> 时结果为 <code>true</code>，否则为 <code>false</code>。</td>
</tr>
<tr>
<td>\</td>
<td>\</td>
<td></td>
<td>短路逻辑或，操作数只要有一个为 <code>true</code> 结果即为  <code>true</code>，只有均为 <code>false</code> 时为 <code>false</code> 。</td>
</tr>
<tr>
<td>!</td>
<td>逻辑非，单目运算，结果跟操作数相反。</td>
</tr>
</tbody>
</table>
<p>Go 的逻辑运算跟 C 一样是『短路逻辑』，双目运算时右操作数是『按需求值』的——意思是，如果不需要用到右操作数的值就能得到表达式的值，右操作数就不会求值。这可以用于避免一些运行时错误。</p>
<p>例如 <code>if a.val &gt; 10</code> ，如果 <code>a</code> 是 <code>nil</code>，就会产生一个 “nil pointer dereference” 的空指针 panic。这时如果改为 <code>if (a != nil) &amp;&amp; (a.val &gt; 10)</code> （括号非必要，只是方便看清左右操作数的范围），当 <code>a</code> 为 <code>nil</code> 时，<code>a != nil</code> 为 <code>false</code> ，对于逻辑与来说，无论右操作数的值是什么，整个表达式都一定是 <code>false</code> ，所以右操作数的表达式会被直接跳过不求值，也就不会触发空指针引用了。</p>
<h3 id="4-其它运算符"><a href="#4-其它运算符" class="headerlink" title="4 其它运算符"></a>4 其它运算符</h3><p>不好归类的运算符在这里统一介绍。</p>
<h4 id="地址（address）运算符"><a href="#地址（address）运算符" class="headerlink" title="地址（address）运算符"></a>地址（address）运算符</h4><p>有两个，分别是 <strong>取址运算符</strong> <code>&amp;</code> 和 <strong>解引用（dereference，又译 提取 或 取值）运算符</strong> <code>*</code> 。均为单目运算符，写在操作数前面。</p>
<p>取址运算应用在 <code>T</code> 类型的操作数 <code>x</code> 上，会得到一个 <code>*T</code> 类型的指针，指向 <code>x</code> 的地址；<code>x</code> 必须是可寻址的（addressable）。</p>
<p>相反，解引用运算应用在 <code>*T</code> 类型的操作数 <code>p</code> 上，会得到一个 <code>T</code> 类型的值；<code>p</code> 必须是一个有效的指针，不能为 <code>nil</code> ，否则会引起空指针解引用的运行时 panic。</p>
<h5 id="可寻址（addressable）"><a href="#可寻址（addressable）" class="headerlink" title="可寻址（addressable）"></a>可寻址（addressable）</h5><p>Go 中可寻址的范围比其它一些语言要广，除了变量（意味着有对应的可变内存）以外，还可以是：</p>
<ul>
<li>指针的解引用：<code>p</code> 是一个非 <code>nil</code> 指针，则 <code>*p</code> 可寻址，<code>&amp;*p</code> 其实就是对取值的结果再取址，等于 <code>p</code> 自身。</li>
<li>切片（slice）的索引操作：<code>s</code> 是一个 切片，则 <code>s[1]</code> 可寻址（即使切片本身不可寻址，当然需要 <code>s</code> 非空且索引在范围内）。</li>
<li>可寻址结构体的字段：<code>a</code> 是一个可寻址的结构体，则 <code>a.X</code> 可寻址（需要有 <code>X</code> 这个字段）。</li>
<li>可寻址数组的索引操作：<code>a</code> 是一个可寻址的数组，则 <code>a[1]</code> 可寻址（同样需要索引操作先成功）。</li>
<li>复合类型字面量：例如切片字面量 <code>[]int{1,2,3}</code> ，结构体字面量 <code>struct{X int}{1}</code> ，（使用上看起来）都是可寻址的。注意这条是一条例外，实际上是一个方便使用的语法糖，本质上 <code>&amp;T{...}</code> 等价于 <code>tmp := T{...}; &amp;tmp</code> ，表面上是对字面量取址，实际上是对自动生成的变量取址。</li>
</ul>
<p>作为对比，以下的情况均不可寻址：</p>
<ul>
<li>字符串的索引操作，即字符串中的字节。</li>
<li>映射 （<code>map</code> ）中的元素。</li>
<li>通过类型断言获得的接口变量的动态值。</li>
<li>常量。</li>
<li>字面量（复合字面量是个例外，背后其实是语法糖）。</li>
<li>包（package）级函数。</li>
<li>方法（当作函数值）。</li>
<li>各种中间值：<ul>
<li>函数调用（可能有返回值，也可能没有，都不可寻址）。</li>
<li>显式类型转换。</li>
<li>除了指针解引用（<code>*p</code>）以外的所有运算。</li>
</ul>
</li>
</ul>
<p>如果觉得上述列举过于繁琐，可以总结为一点：取址的对象必须是安全的可修改的内存。相对应地，不可寻址的情况可以总结为三点：</p>
<ul>
<li><p>不可变的。</p>
<p>  字面量、常量、字符串的字节 都是这种情况。如果取址之后可以修改，则破坏了不可变性；如果不能修改，那么对不可变的值取址没有意义。</p>
</li>
<li><p>中间结果。</p>
<p>  函数返回值、类型转换、类型断言、表达式结果 等都属于这种情况。中间结果的问题是，还没赋值给一个变量，没分配可访问的内存，没有地址可言。</p>
</li>
<li><p>不安全的。</p>
<p>  映射的元素、包级的函数 等属于这种情况。这种属于底层操作上可以取址，但是取址会引起问题，语法上规定了不可取址。</p>
</li>
</ul>
<p>映射的元素为什么不可寻址？映射（map）底层用哈希表实现，有自己的内存管理机制，当条目数量改变时可能会调整内存并重新哈希条目，将元素在内部移动，此时如果允许寻址，之前取的地址就会失效。</p>
<p>为什么哪怕是不可寻址的切片（例如函数返回的切片），它的索引也可以寻址？因为后面介绍到切片就会发现，切片是一个引用类型，切片本身只是切片的元数据，底层指向一个总是可寻址的数组。对切片的索引操作实际上是对底层数组的索引，自然是可寻址的。</p>
<p>更多关于可寻址的总结，可以参考 <a href="https://gfw.go101.org/article/unofficial-faq.html#unaddressable-values。" target="_blank" rel="external">https://gfw.go101.org/article/unofficial-faq.html#unaddressable-values。</a></p>
<h4 id="接收（receive）运算符"><a href="#接收（receive）运算符" class="headerlink" title="接收（receive）运算符"></a>接收（receive）运算符</h4><p>只有一个 <code>&lt;-</code> ，单目运算符，用在通道（<code>chan</code>）变量前面，表达式的值是从通道中接收到的值，类型则是通道的元素类型。</p>
<p>通道必须是可读的通道（读写 <code>chan</code> 或者只读 <code>&lt;-chan</code> ，不能是只写 <code>chan&lt;-</code>）。接收操作会阻塞直到有值可接收，试图从 <code>nil</code> 通道接收会一直阻塞，而试图从关闭（closed）的通道接收则会马上返回一个对应类型的零值。</p>
<p>这里其实我们只需要知道 <code>&lt;-</code> 是一个运算符，从通道接收是一个表达式即可。详细内容可以到介绍并发和通道时再深入了解。</p>
<h3 id="5-运算符优先级"><a href="#5-运算符优先级" class="headerlink" title="5 运算符优先级"></a>5 运算符优先级</h3><p>上表格，数字越大优先级越高：</p>
<table>
<thead>
<tr>
<th>优先级</th>
<th>运算符</th>
</tr>
</thead>
<tbody>
<tr>
<td>6</td>
<td>所有单目运算符：正负号<code>+</code>/<code>-</code>，按位取反<code>^</code> , 逻辑非 <code>!</code> ，取址<code>&amp;</code> ，解引用 <code>*</code> ，接收<code>&lt;-</code></td>
</tr>
<tr>
<td>5</td>
<td><code>*  /  %  &lt;&lt;  &gt;&gt;  &amp;  &amp;^</code></td>
</tr>
<tr>
<td>4</td>
<td><code>+  -</code></td>
</tr>
<tr>
<td>3</td>
<td><code>==  !=  &lt;  &lt;=  &gt;  &gt;=</code></td>
</tr>
<tr>
<td>2</td>
<td><code>&amp;&amp;</code></td>
</tr>
<tr>
<td>1</td>
<td>`</td>
<td></td>
<td>`</td>
</tr>
<tr>
<td>0</td>
<td>语句</td>
</tr>
</tbody>
</table>
<p>所有单目运算符优先级都是最高，换言之其它优先级里的都是双目运算符。像优先级为 5 的 <code>*</code> 只能是乘号，而不是解引用。</p>
<p>原本没有 0，最后一行是我加的，语句并非运算符的一部分。语句的优先级最低，在所有运算符之后，像赋值 <code>=</code> 和 自增 <code>++</code> 自减 <code>--</code> 。像 <code>*p++</code> 等价于 <code>(*p)++</code> ，解引用是优先级最高的单目运算符，自增则是优先级最低的语句。</p>
<p>对于优先级，我个人的看法是，留个印象即可，不必细究。遇到优先级容易产生歧义的地方，直接加括号，清晰明了，适当增加括号没有任何副作用。</p>
<p>你愿意花时间熟悉优先级当然好。但是在实际开发中，你熟悉的不能保证其他人也熟悉，也不能保证自己未来会不会一时看错。保持程序的可读性非常重要。</p>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>非常巧合，我在准备这一期的内容的前几天，刚好看见 Go 语言中文站的站长徐老师分享了两道练习题，正好作为运算符的练习题，那我就直接拿来主义（文中有解析，先自己尝试做，不要直接看答案）：</p>
<ul>
<li><p><a href="https://mp.weixin.qq.com/s/Pa_YgypVUlVaTN0ZutSyoQ" target="_blank" rel="external">题解：竟然半数以上的人做错了，基础真的很重要</a></p>
</li>
<li><p><a href="https://mp.weixin.qq.com/s/GqdzjXuaZOmjqit32Vxuzg" target="_blank" rel="external">这么一道“简单”的题，为什么结果出乎我的意料</a></p>
</li>
</ul>
<h2 id="上期练习答案"><a href="#上期练习答案" class="headerlink" title="上期练习答案"></a>上期练习答案</h2><p>问题1：</p>
<p>一般情况下，我们用自定义类型（defined type）的常量模拟枚举。三种状态最直接的做法是：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">type</span> State <span class="keyword">int</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> (</div><div class="line">    Todo State = <span class="literal">iota</span> <span class="comment">// 零值。只声明不赋值就会得到零值。如果想区分零值和有效值，可以在前面增加一个 Unknown 作为零值，并增加一个对 Unknown 的判断。</span></div><div class="line">    Ongoing</div><div class="line">    Done</div><div class="line">)</div></pre></td></tr></table></figure>
<p>如果只是个别地方使用，完全没有必要纠结底层类型（underlying type）。考虑到有内存对齐，底层使用 <code>int8</code> 也不见得可以节约多少内存，反而可能增加类型转换的麻烦。</p>
<p>不过如果要用到一个很大的 <code>[]State</code> 切片，这时底层类型就值得考虑一下了。三个（或者加上 <code>Unknown</code> 四个）状态， <code>bool</code> 无法表示，就只能选择 <code>int8</code> 或者 <code>uint8</code> 了。</p>
<p>问题2：</p>
<p><code>true</code> 。</p>
<p>这里有一个刻意的误导。<code>str1</code> 和 <code>str2</code> 指向不同的字符串；这点都不需要 <code>str2</code> 是拼接得到的，即使 <code>var str2 = &quot;hello world&quot;</code> ，甚至 <code>var str2 = str1</code>，它们都不会指向同一个字符串。这意味着，<code>&amp;str1 == &amp;str2</code> （<code>&amp;</code> 是取址操作，得到的是指针）总是 <code>false</code> 。</p>
<p>但是，比较操作符 <code>==</code> 在字符串上比较的是内容。两个字符串长度一致，对应的每个字节都相等，就会被认为相等，所以是 true。这个问题其实超出了上期的内容，对错没有关系，能引发思考和留下印象就好。</p>
<hr>
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议"><br>本文为本人原创，采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external">知识共享 “署名-非商业性使用-相同方式共享” 4.0 (CC BY-NC-SA 4.0)”许可协议</a>进行许可。<br>本作品可自由复制、传播及基于本作品进行演绎创作。如有以上需要，请留言告知，在文章开头明显位置加上署名（Jayce Chant）、原链接及许可协议信息，并明确指出修改（如有），不得用于商业用途。谢谢合作。<br>请点击查看<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="external">协议</a>的中文摘要。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://jaycechant.info/2020/golang-in-action-day-4/" data-id="ckivxh4w700bdk0xl1p9feol2" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="https://jaycechant.info/2020/golang-in-action-day-4/#disqus_thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/golang-in-action-day-5/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          Go 语言实战（5）：流程控制
        
      </div>
    </a>
  
  
    <a href="/2020/translation-billion-dollar-mistake-in-go/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">Go 语言中价值十亿美元的错误（翻译）</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Go-语言实战/">Go 语言实战</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/刷题/">刷题</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/科普/">科普</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/粤语/">粤语</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 13.33px;">Algorithm</a> <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Android/" style="font-size: 11.67px;">Android</a> <a href="/tags/Android-sdk/" style="font-size: 10px;">Android-sdk</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/JCE/" style="font-size: 10px;">JCE</a> <a href="/tags/Java/" style="font-size: 11.67px;">Java</a> <a href="/tags/JavaMail/" style="font-size: 10px;">JavaMail</a> <a href="/tags/Jenkins/" style="font-size: 16.67px;">Jenkins</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 13.33px;">Markdown</a> <a href="/tags/Mathjax/" style="font-size: 10px;">Mathjax</a> <a href="/tags/OJ/" style="font-size: 10px;">OJ</a> <a href="/tags/Octopress/" style="font-size: 10px;">Octopress</a> <a href="/tags/OpenGrok/" style="font-size: 10px;">OpenGrok</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Syncthing/" style="font-size: 10px;">Syncthing</a> <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 11.67px;">Ubuntu</a> <a href="/tags/algorithm/" style="font-size: 11.67px;">algorithm</a> <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/blog/" style="font-size: 13.33px;">blog</a> <a href="/tags/byobu/" style="font-size: 11.67px;">byobu</a> <a href="/tags/ctags/" style="font-size: 10px;">ctags</a> <a href="/tags/dep/" style="font-size: 11.67px;">dep</a> <a href="/tags/document/" style="font-size: 10px;">document</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/file-system/" style="font-size: 10px;">file-system</a> <a href="/tags/flutter/" style="font-size: 10px;">flutter</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/glide/" style="font-size: 10px;">glide</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/how-to/" style="font-size: 16.67px;">how-to</a> <a href="/tags/jpg/" style="font-size: 10px;">jpg</a> <a href="/tags/json/" style="font-size: 11.67px;">json</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/node-js/" style="font-size: 11.67px;">node.js</a> <a href="/tags/nodePPT/" style="font-size: 11.67px;">nodePPT</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pgyer/" style="font-size: 10px;">pgyer</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/png/" style="font-size: 10px;">png</a> <a href="/tags/practice/" style="font-size: 11.67px;">practice</a> <a href="/tags/presentation/" style="font-size: 11.67px;">presentation</a> <a href="/tags/review/" style="font-size: 10px;">review</a> <a href="/tags/screen/" style="font-size: 11.67px;">screen</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/skill/" style="font-size: 13.33px;">skill</a> <a href="/tags/smtp/" style="font-size: 10px;">smtp</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/solution-report/" style="font-size: 10px;">solution-report</a> <a href="/tags/supervisor/" style="font-size: 10px;">supervisor</a> <a href="/tags/thought/" style="font-size: 10px;">thought</a> <a href="/tags/trouble/" style="font-size: 18.33px;">trouble</a> <a href="/tags/unfinished/" style="font-size: 13.33px;">unfinished</a> <a href="/tags/virtualenv/" style="font-size: 10px;">virtualenv</a> <a href="/tags/vsftp/" style="font-size: 10px;">vsftp</a> <a href="/tags/why/" style="font-size: 11.67px;">why</a> <a href="/tags/写作/" style="font-size: 13.33px;">写作</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/安全/" style="font-size: 10px;">安全</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/翻译/" style="font-size: 13.33px;">翻译</a> <a href="/tags/语言表达/" style="font-size: 10px;">语言表达</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">四月 2012</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/why-element-type-of-slice-cannot-be-converted-in-go/">答读者问：为什么 Go 里面不能把任意切片转换为 []interface{} ？</a>
          </li>
        
          <li>
            <a href="/2020/get-ready-for-a-new-life/">迎接一个新生命的到来：备孕篇</a>
          </li>
        
          <li>
            <a href="/2020/origin-of-names-of-provincial-administrative-regions-in-china/">我国省级行政区名称起源</a>
          </li>
        
          <li>
            <a href="/2020/golang-in-action-day-7/">Go 语言实战（7）：命令行程序（2）</a>
          </li>
        
          <li>
            <a href="/2020/three-things-to-do-when-you-hit-a-crossroads-translation/">遇到十字路口，你要做的三件事（翻译）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://hexo.io/zh-cn/" target="_blank">Hexo主页</a>
          </li>
        
          <li>
            <a href="https://hexo.io/zh-cn/docs/" target="_blank">Hexo文档</a>
          </li>
        
          <li>
            <a href="https://github.com/xiangming/landscape-plus" target="_blank">landscape-plus项目主页</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Jayce Sigit Chant<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/list" class="mobile-nav-link">List</a>
  
    <a href="https://github.com/JayceChant" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">Sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<script>
  var disqus_shortname = 'jaycetb';
  
  var disqus_url = 'https://jaycechant.info/2020/golang-in-action-day-4/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>



<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
